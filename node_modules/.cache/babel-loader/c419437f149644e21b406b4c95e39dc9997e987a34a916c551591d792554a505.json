{"ast":null,"code":"import _objectSpread from\"/Users/adambower/Dev/ab-civil-website-preview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import'./ServiceRequestForm.css';import{supabase}from'../../../lib/supabase';import FileUploadWithFolders from'../../FileUpload/FileUploadWithFolders';import SupabaseStorageService from'../../../services/supabaseStorageService';import ConfirmationPage from'../../ConfirmationPage/ConfirmationPage';import AutoResizeWrapper from'../../AutoResizeWrapper/AutoResizeWrapper';import{sanitizeInput,isValidEmail,isValidPhone,generateSecureId,validateFormData,formSubmissionLimiter,maskSensitiveData}from'../../../utils/security';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ServiceRequestForm=()=>{// State management\nconst[currentStep,setCurrentStep]=useState('selection');// 'selection', 'form', or 'confirmation'\nconst[serviceSelection,setServiceSelection]=useState({serviceType:'',// '3D Model' or 'Takeoff'\nproceedWork:''// 'Yes' or 'Quote Only'\n});const[formData,setFormData]=useState({// Common fields\nname:'',email:'',company:'',project:'',state:'',phone:'',// Model specific fields\nrevision:'',dueDate:'',fileFormats:[],additionalRequests:[],erosionSurfaceDueDate:'',// Date for Initial Erosion Surface\nadvancedUtilities:false,// Checkbox for 3D/Elevated Pipe\nstructureCount:'',// Number input for advanced utilities\n// Takeoff specific fields\ncadAvailable:'',scopeOptions:[],// Initialize as empty array for checkboxes\nstrippingDepth:'',replacementDepth:'',projectInfo:'',// Common optional fields\nspecialInstructions:'',// File attachments - Initialize as empty array\nfileAttachments:[]});const[errors,setErrors]=useState({});const[isSubmitting,setIsSubmitting]=useState(false);const[submitMessage,setSubmitMessage]=useState({type:'',text:''});const[submissionResult,setSubmissionResult]=useState(null);// Function to scroll to first error\nconst scrollToFirstError=errorFields=>{// Find the first field with an error\nconst firstErrorField=Object.keys(errorFields)[0];if(!firstErrorField)return;// Add a small delay to let the error messages render\nsetTimeout(()=>{// Try to find the element with the error\nlet targetElement=null;// First try to find by ID\ntargetElement=document.getElementById(firstErrorField);// If not found, try to find by name attribute\nif(!targetElement){targetElement=document.querySelector(\"[name=\\\"\".concat(firstErrorField,\"\\\"]\"));}// If not found, try to find the error message itself and get its associated input\nif(!targetElement){const errorMessages=document.querySelectorAll('.error-message');for(const errorMsg of errorMessages){// Look for input/select/textarea in the same parent container\nconst container=errorMsg.closest('.input-wrapper')||errorMsg.closest('.form-row');if(container){const input=container.querySelector('input, select, textarea');if(input){targetElement=input;break;}}}}// If we found an element, scroll to it with proper cushion\nif(targetElement){// Calculate position with cushion space\nconst elementRect=targetElement.getBoundingClientRect();const absoluteElementTop=elementRect.top+window.pageYOffset;const cushionSpace=150;// Space from top of viewport\nconst targetScrollPosition=Math.max(0,absoluteElementTop-cushionSpace);// Smooth scroll to position\nwindow.scrollTo({top:targetScrollPosition,behavior:'smooth'});// Focus the field after scrolling completes\nsetTimeout(()=>{if(targetElement.tagName==='INPUT'||targetElement.tagName==='SELECT'||targetElement.tagName==='TEXTAREA'){targetElement.focus();}},500);// Wait for smooth scroll to complete\n}},100);// Small delay to ensure DOM is updated\n};// US States list\nconst states=[{value:'',label:'Select a state'},{value:'AL',label:'Alabama'},{value:'AK',label:'Alaska'},{value:'AZ',label:'Arizona'},{value:'AR',label:'Arkansas'},{value:'CA',label:'California'},{value:'CO',label:'Colorado'},{value:'CT',label:'Connecticut'},{value:'DE',label:'Delaware'},{value:'FL',label:'Florida'},{value:'GA',label:'Georgia'},{value:'HI',label:'Hawaii'},{value:'ID',label:'Idaho'},{value:'IL',label:'Illinois'},{value:'IN',label:'Indiana'},{value:'IA',label:'Iowa'},{value:'KS',label:'Kansas'},{value:'KY',label:'Kentucky'},{value:'LA',label:'Louisiana'},{value:'ME',label:'Maine'},{value:'MD',label:'Maryland'},{value:'MA',label:'Massachusetts'},{value:'MI',label:'Michigan'},{value:'MN',label:'Minnesota'},{value:'MS',label:'Mississippi'},{value:'MO',label:'Missouri'},{value:'MT',label:'Montana'},{value:'NE',label:'Nebraska'},{value:'NV',label:'Nevada'},{value:'NH',label:'New Hampshire'},{value:'NJ',label:'New Jersey'},{value:'NM',label:'New Mexico'},{value:'NY',label:'New York'},{value:'NC',label:'North Carolina'},{value:'ND',label:'North Dakota'},{value:'OH',label:'Ohio'},{value:'OK',label:'Oklahoma'},{value:'OR',label:'Oregon'},{value:'PA',label:'Pennsylvania'},{value:'RI',label:'Rhode Island'},{value:'SC',label:'South Carolina'},{value:'SD',label:'South Dakota'},{value:'TN',label:'Tennessee'},{value:'TX',label:'Texas'},{value:'UT',label:'Utah'},{value:'VT',label:'Vermont'},{value:'VA',label:'Virginia'},{value:'WA',label:'Washington'},{value:'WV',label:'West Virginia'},{value:'WI',label:'Wisconsin'},{value:'WY',label:'Wyoming'}];// Phone number formatting with +1 prefix\nconst formatPhoneNumber=value=>{// Remove all non-digits and the +1 prefix if it exists\nconst cleaned=value.replace(/^\\+1\\s?/,'').replace(/\\D/g,'');const limited=cleaned.substring(0,10);if(limited.length===0)return'';if(limited.length<=3)return\"+1 (\".concat(limited);if(limited.length<=6)return\"+1 (\".concat(limited.substring(0,3),\") \").concat(limited.substring(3));return\"+1 (\".concat(limited.substring(0,3),\") \").concat(limited.substring(3,6),\"-\").concat(limited.substring(6));};// Handle field changes with sanitization\nconst handleFieldChange=(field,value)=>{// Don't sanitize during input - only sanitize on submit\nsetFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));// Clear error for this field\nif(errors[field]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:''}));}};// Handle checkbox changes\nconst handleCheckboxChange=(field,value)=>{setFormData(prev=>{const currentValues=prev[field];const newValues=currentValues.includes(value)?currentValues.filter(v=>v!==value):[...currentValues,value];return _objectSpread(_objectSpread({},prev),{},{[field]:newValues});});};// Validate selection step\nconst validateSelection=()=>{const newErrors={};if(!serviceSelection.serviceType){newErrors.serviceType='Please select a service type';}if(!serviceSelection.proceedWork){newErrors.proceedWork='Please select how to proceed';}setErrors(newErrors);if(Object.keys(newErrors).length>0){scrollToFirstError(newErrors);}return Object.keys(newErrors).length===0;};// Validate form based on type\nconst validateForm=()=>{const newErrors={};// Common required fields with validation\nif(!formData.name){newErrors.name='Name is required';}else if(formData.name.length<2||formData.name.length>100){newErrors.name='Name must be between 2 and 100 characters';}if(!formData.email){newErrors.email='Email is required';}else if(!isValidEmail(formData.email)){newErrors.email='Please enter a valid email address';}if(!formData.company){newErrors.company='Company name is required';}else if(formData.company.length<2||formData.company.length>200){newErrors.company='Company name must be between 2 and 200 characters';}if(!formData.project){newErrors.project='Project name is required';}else if(formData.project.length<2||formData.project.length>200){newErrors.project='Project name must be between 2 and 200 characters';}// Model-specific validation\nif(serviceSelection.serviceType==='3D Model'){if(!formData.state)newErrors.state='Project state is required';if(!formData.revision)newErrors.revision='Please specify if this is a revision';if(!formData.dueDate)newErrors.dueDate='Due date is required';if(formData.fileFormats.length===0)newErrors.fileFormats='Please select at least one file format';// Validate erosion surface date if Initial Erosion Surface is selected\nif(formData.additionalRequests.includes('Initial Erosion Surface')&&!formData.erosionSurfaceDueDate){newErrors.erosionSurfaceDueDate='Initial Erosion Surface due date is required';}}// Takeoff-specific validation (no state field needed)\nif(serviceSelection.serviceType==='Takeoff'){var _formData$scopeOption;if(!formData.dueDate)newErrors.dueDate='Due date is required';if(!formData.cadAvailable)newErrors.cadAvailable='Please specify if CAD files are available';if(!formData.scopeOptions||formData.scopeOptions.length===0){newErrors.scopeOptions='Please select at least one scope option';}// Validate earthwork depth fields if Earthwork is selected\nif((_formData$scopeOption=formData.scopeOptions)!==null&&_formData$scopeOption!==void 0&&_formData$scopeOption.includes('Earthwork Cut/Fill')){if(!formData.strippingDepth)newErrors.strippingDepth='Stripping depth is required when Earthwork Cut/Fill is selected';if(!formData.replacementDepth)newErrors.replacementDepth='Replacement depth is required when Earthwork Cut/Fill is selected';}}setErrors(newErrors);console.log('Validation errors:',newErrors);if(Object.keys(newErrors).length>0){scrollToFirstError(newErrors);}return Object.keys(newErrors).length===0;};// Handle selection submission\nconst handleSelectionSubmit=e=>{e.preventDefault();if(validateSelection()){setCurrentStep('form');setErrors({});}};// Handle form submission to Supabase with security checks\nconst handleFormSubmit=async e=>{e.preventDefault();// Check rate limiting\nconst rateLimitCheck=formSubmissionLimiter.check(formData.email||'anonymous');if(!rateLimitCheck.allowed){setSubmitMessage({type:'error',text:rateLimitCheck.message});return;}// Log with masked sensitive data\nconsole.log('Form submission triggered');console.log('Current formData:',maskSensitiveData(formData));console.log('Service selection:',serviceSelection);if(!validateForm()){console.log('Validation failed. Errors:',errors);return;}// Additional security validation\nconst securityCheck=validateFormData(formData);if(!securityCheck.isValid){setErrors(securityCheck.errors);setSubmitMessage({type:'error',text:'Invalid input detected. Please check your entries.'});return;}setIsSubmitting(true);setSubmitMessage({type:'',text:''});try{var _formData$fileAttachm;// Helper to strip +1 from phone numbers for database storage\nconst stripPhonePrefix=phone=>{if(!phone)return phone;return phone.replace(/^\\+1\\s?/,'');};// Determine which table to use based on selection\nlet tableName='';if(serviceSelection.serviceType==='3D Model'&&serviceSelection.proceedWork==='Yes'){tableName='model_requests';}else if(serviceSelection.serviceType==='3D Model'&&serviceSelection.proceedWork==='Quote Only'){tableName='model_quotes';}else if(serviceSelection.serviceType==='Takeoff'&&serviceSelection.proceedWork==='Yes'){tableName='takeoff_requests';}else if(serviceSelection.serviceType==='Takeoff'&&serviceSelection.proceedWork==='Quote Only'){tableName='takeoff_quotes';}// Prepare submission data based on form type\nlet submissionData={};// Add model-specific fields for model_requests table\nif(serviceSelection.serviceType==='3D Model'&&serviceSelection.proceedWork==='Yes'){submissionData={name:sanitizeInput(formData.name),email:sanitizeInput(formData.email),company_name:sanitizeInput(formData.company),project_name:sanitizeInput(formData.project),state:formData.state,is_revision:formData.revision==='Yes'?true:false,finish_grade_due_date:formData.dueDate,file_formats:formData.fileFormats,// JSONB - send as array\nadditional_requests:formData.additionalRequests.length>0?formData.additionalRequests:null,// JSONB\nadvanced_utility:formData.additionalRequests.includes('3D/Elevated Pipe')&&formData.advancedUtilities===true,// Only true if 3D/Elevated Pipe is selected AND Advanced Utilities is checked\nstructure_count:formData.additionalRequests.includes('3D/Elevated Pipe')&&formData.advancedUtilities&&formData.structureCount?parseInt(formData.structureCount):null,erosion_surface_due_date:formData.additionalRequests.includes('Initial Erosion Surface')&&formData.erosionSurfaceDueDate?formData.erosionSurfaceDueDate:null,project_info:formData.specialInstructions||null,// Format file attachments for database JSONB column\nfile_attachments:(()=>{if(!formData.fileAttachments||formData.fileAttachments.length===0){return null;}// Filter for uploaded files (those with a URL)\nconst uploadedFiles=formData.fileAttachments.filter(f=>!!f.url);if(uploadedFiles.length===0)return null;return uploadedFiles.map(f=>({filename:f.filename,url:f.url,size:f.size,path:f.path||f.url.split('/').slice(-2).join('/')}));})()// created_at and updated_at are handled by database defaults\n};}// Add fields for model_quotes table\nelse if(serviceSelection.serviceType==='3D Model'&&serviceSelection.proceedWork==='Quote Only'){submissionData={name:formData.name,email:formData.email,company_name:formData.company,project_name:formData.project,state:formData.state,is_revision:formData.revision==='Yes'?true:false,quote_due_date:formData.dueDate,// Note: different field name than model_requests\nfile_formats:formData.fileFormats.length>0?formData.fileFormats:null,// text[] array\nadditional_requests:formData.additionalRequests.length>0?formData.additionalRequests:null,// text[] array\nadvanced_utility:formData.additionalRequests.includes('3D/Elevated Pipe')&&formData.advancedUtilities===true,// Only true if 3D/Elevated Pipe is selected AND Advanced Utilities is checked\nstructure_count:formData.additionalRequests.includes('3D/Elevated Pipe')&&formData.advancedUtilities&&formData.structureCount?parseInt(formData.structureCount):null,erosion_surface_due_date:formData.additionalRequests.includes('Initial Erosion Surface')&&formData.erosionSurfaceDueDate?formData.erosionSurfaceDueDate:null,project_info:formData.specialInstructions||null,// Format file attachments for database JSONB column\nfile_attachments:(()=>{if(!formData.fileAttachments||formData.fileAttachments.length===0){return null;}// Filter for uploaded files (those with a URL)\nconst uploadedFiles=formData.fileAttachments.filter(f=>!!f.url);if(uploadedFiles.length===0)return null;return uploadedFiles.map(f=>({filename:f.filename,url:f.url,size:f.size,path:f.path||f.url.split('/').slice(-2).join('/')}));})(),// These fields will be null for new submissions\nprice:null,quote_status:null,notes_from_ab_civil:null,date_quoted:null,quote_status_change_date:null,client_name:null,client_id:null,// Airtable fields null for web submissions\nairtable_record_id:null,airtable_client_record_id:null,airtable_contact_record_id:null,airtable_created_date:null,last_modified_date:null};}// Add takeoff_requests table fields\nelse if(serviceSelection.serviceType==='Takeoff'&&serviceSelection.proceedWork==='Yes'){submissionData={name:formData.name,email:formData.email,phone:null,company_name:formData.company,project_name:formData.project,due_date:formData.dueDate,cad_available:formData.cadAvailable==='Yes',scope_options:formData.scopeOptions,// JSONB array\nstripping_depth:formData.strippingDepth||null,replacement_depth:formData.replacementDepth||null,project_info:formData.projectInfo||null,takeoff_status:null,// Explicitly set to null to avoid database default\n// Format file attachments for database JSONB column\nfile_attachments:(()=>{if(!formData.fileAttachments||formData.fileAttachments.length===0){return null;}// Filter for uploaded files (those with a URL)\nconst uploadedFiles=formData.fileAttachments.filter(f=>!!f.url);if(uploadedFiles.length===0)return null;return uploadedFiles.map(f=>({filename:f.filename,url:f.url,size:f.size,path:f.path||f.url.split('/').slice(-2).join('/')}));})()// created_at and updated_at are handled by database defaults\n};}// Add takeoff_quotes table fields (same structure as takeoff_requests)\nelse if(serviceSelection.serviceType==='Takeoff'&&serviceSelection.proceedWork==='Quote Only'){submissionData={name:sanitizeInput(formData.name),email:sanitizeInput(formData.email),phone:null,company_name:sanitizeInput(formData.company),project_name:sanitizeInput(formData.project),due_date:formData.dueDate,cad_available:formData.cadAvailable==='Yes',scope_options:formData.scopeOptions,// JSONB array\nstripping_depth:formData.strippingDepth||null,replacement_depth:formData.replacementDepth||null,project_info:formData.projectInfo||null,// Format file attachments for database JSONB column\nfile_attachments:(()=>{if(!formData.fileAttachments||formData.fileAttachments.length===0){return null;}// Filter for uploaded files (those with a URL)\nconst uploadedFiles=formData.fileAttachments.filter(f=>!!f.url);if(uploadedFiles.length===0)return null;return uploadedFiles.map(f=>({filename:f.filename,url:f.url,size:f.size,path:f.path||f.url.split('/').slice(-2).join('/')}));})()// created_at and updated_at are handled by database defaults\n};}// Insert into the appropriate table\nconst{data,error}=await supabase.from(tableName).insert([submissionData]).select();if(error){console.error('Supabase error details:',{message:error.message,details:error.details,hint:error.hint,code:error.code});throw error;}console.log('Submission successful:',data);// Files are already uploaded, collect metadata for confirmation display\n// Updated filter to be more inclusive - check for uploadComplete or has url\nconst uploadedFiles=((_formData$fileAttachm=formData.fileAttachments)===null||_formData$fileAttachm===void 0?void 0:_formData$fileAttachm.filter(file=>file.uploadComplete===true||file.url&&!file.isLocal))||[];console.log('Files successfully included in submission:',uploadedFiles.length);console.log('[ServiceRequestForm] Filtered uploadedFiles details:',uploadedFiles);// Success! Store submission data and show confirmation page\n// Use secure random ID instead of timestamp\nconst referenceNumber=\"SR-\".concat(generateSecureId(8));// Debug logging for production\nconsole.log('[ServiceRequestForm] Setting submissionResult with uploadedFiles:',{hasUploadedFiles:!!uploadedFiles,uploadedFilesLength:uploadedFiles?uploadedFiles.length:0,uploadedFiles:uploadedFiles});setSubmissionResult({referenceNumber,serviceType:serviceSelection.serviceType,proceedWork:serviceSelection.proceedWork,submittedData:_objectSpread(_objectSpread({},formData),{},{serviceType:serviceSelection.serviceType,proceedWork:serviceSelection.proceedWork}),uploadedFiles:uploadedFiles});setCurrentStep('confirmation');}catch(error){console.error('Submission error:',error);console.error('Error details:',error.message);setSubmitMessage({type:'error',text:\"Error: \".concat(error.message||'There was an error submitting your request. Please try again.')});}finally{setIsSubmitting(false);}};// Handle new submission from confirmation page\nconst handleNewSubmission=()=>{resetForm();setSubmissionResult(null);};// Reset form\nconst resetForm=()=>{setCurrentStep('selection');setServiceSelection({serviceType:'',proceedWork:''});setFormData({name:'',email:'',company:'',project:'',state:'',phone:'',revision:'',dueDate:'',fileFormats:[],additionalRequests:[],erosionSurfaceDueDate:'',advancedUtilities:false,structureCount:'',cadAvailable:'',scopeOptions:[],strippingDepth:'',replacementDepth:'',projectInfo:'',specialInstructions:'',fileAttachments:[]});setErrors({});setSubmitMessage({type:'',text:''});};// Handle back navigation\nconst handleBack=()=>{setCurrentStep('selection');setErrors({});};// Render selection step\nconst renderSelectionStep=()=>/*#__PURE__*/_jsx(\"div\",{className:\"selection-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSelectionSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"question-group\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"question\",children:[\"Do you need a Model or a Takeoff? \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"radio-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"model\",name:\"serviceType\",value:\"3D Model\",checked:serviceSelection.serviceType==='3D Model',onChange:e=>setServiceSelection(prev=>_objectSpread(_objectSpread({},prev),{},{serviceType:e.target.value}))}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"model\",children:\"3D Model\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"radio-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"takeoff\",name:\"serviceType\",value:\"Takeoff\",checked:serviceSelection.serviceType==='Takeoff',onChange:e=>setServiceSelection(prev=>_objectSpread(_objectSpread({},prev),{},{serviceType:e.target.value}))}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"takeoff\",children:\"Takeoff\"})]})]}),errors.serviceType&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.serviceType})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"question-group\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"question\",children:[\"Proceed with the work? \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"radio-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"yes\",name:\"proceedWork\",value:\"Yes\",checked:serviceSelection.proceedWork==='Yes',onChange:e=>setServiceSelection(prev=>_objectSpread(_objectSpread({},prev),{},{proceedWork:e.target.value}))}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"yes\",children:\"Yes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"radio-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"quoteOnly\",name:\"proceedWork\",value:\"Quote Only\",checked:serviceSelection.proceedWork==='Quote Only',onChange:e=>setServiceSelection(prev=>_objectSpread(_objectSpread({},prev),{},{proceedWork:e.target.value}))}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quoteOnly\",children:\"Quote Only\"})]})]}),errors.proceedWork&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.proceedWork})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Next\"})]})});// Render Model Request Form\nconst renderModelForm=()=>/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,className:\"service-form condensed-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"form-title\",children:[\"3D Model \",serviceSelection.proceedWork==='Quote Only'?'Quote':'Request']})}),submitMessage.text&&/*#__PURE__*/_jsx(\"div\",{className:\"submit-message \".concat(submitMessage.type),children:submitMessage.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"name\",children:[\"Name \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",placeholder:\"First and Last\",value:formData.name,onChange:e=>handleFieldChange('name',e.target.value),className:errors.name?'error-highlight':'',required:true}),errors.name&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"email\",children:[\"Email \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",placeholder:\"your@email.com\",value:formData.email,onChange:e=>handleFieldChange('email',e.target.value),className:errors.email?'error-highlight':'',required:true}),errors.email&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.email})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"company\",children:[\"Company Name \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"company\",placeholder:\"Your Company\",value:formData.company,onChange:e=>handleFieldChange('company',e.target.value),className:errors.company?'error-highlight':'',required:true}),errors.company&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.company})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"project\",children:[\"Project Name \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"project\",placeholder:\"Project Name\",value:formData.project,onChange:e=>handleFieldChange('project',e.target.value),className:errors.project?'error-highlight':'',required:true}),errors.project&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.project})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"state\",children:[\"Project State \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"select\",{id:\"state\",value:formData.state,onChange:e=>handleFieldChange('state',e.target.value),className:errors.state?'error-highlight':'',required:true,children:states.map(state=>/*#__PURE__*/_jsx(\"option\",{value:state.value,children:state.label},state.value))}),errors.state&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.state})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Is this a revision to a current model? \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group-inline\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"radio-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"revisionYes\",name:\"revision\",value:\"Yes\",checked:formData.revision==='Yes',onChange:e=>handleFieldChange('revision',e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"revisionYes\",children:\"Yes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"radio-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"revisionNo\",name:\"revision\",value:\"No\",checked:formData.revision==='No',onChange:e=>handleFieldChange('revision',e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"revisionNo\",children:\"No\"})]})]}),errors.revision&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.revision})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"dueDate\",children:[\"Due Date \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"dueDate\",value:formData.dueDate,onChange:e=>handleFieldChange('dueDate',e.target.value),className:errors.dueDate?'error-highlight':'',required:true}),errors.dueDate&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.dueDate})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"File Formats \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-group-inline\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"trimble\",checked:formData.fileFormats.includes('Trimble'),onChange:()=>handleCheckboxChange('fileFormats','Trimble')}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"trimble\",children:\"Trimble\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"topcon\",checked:formData.fileFormats.includes('Topcon'),onChange:()=>handleCheckboxChange('fileFormats','Topcon')}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"topcon\",children:\"Topcon\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"leica\",checked:formData.fileFormats.includes('Leica'),onChange:()=>handleCheckboxChange('fileFormats','Leica')}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"leica\",children:\"Leica\"})]})]}),errors.fileFormats&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.fileFormats})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section form-section-centered\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:\"Additional Requests\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-group-horizontal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"erosion\",checked:formData.additionalRequests.includes('Initial Erosion Surface'),onChange:()=>handleCheckboxChange('additionalRequests','Initial Erosion Surface')}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"erosion\",children:\"Initial Erosion Surface\"})]}),formData.additionalRequests.includes('Initial Erosion Surface')&&/*#__PURE__*/_jsx(\"div\",{className:\"form-section conditional-section\",style:{marginTop:'8px',marginBottom:'8px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"erosionSurfaceDueDate\",children:[\"Erosion Surface Date \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"erosionSurfaceDueDate\",value:formData.erosionSurfaceDueDate,onChange:e=>handleFieldChange('erosionSurfaceDueDate',e.target.value),className:errors.erosionSurfaceDueDate?'error-highlight':'',required:true}),errors.erosionSurfaceDueDate&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.erosionSurfaceDueDate})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"pipe\",checked:formData.additionalRequests.includes('3D/Elevated Pipe'),onChange:()=>handleCheckboxChange('additionalRequests','3D/Elevated Pipe')}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pipe\",children:\"3D/Elevated Pipe\"})]}),formData.additionalRequests.includes('3D/Elevated Pipe')&&/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',marginTop:'2px',fontSize:'13px',color:'#666',textAlign:'center'},children:\"All gravity pipe linework will be elevated by invert elevation.\"}),formData.additionalRequests.includes('3D/Elevated Pipe')&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-section conditional-section\",style:{marginTop:'8px',marginBottom:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Advanced Utilities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-item-inline advanced-utilities-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"advancedUtilities\",checked:formData.advancedUtilities,onChange:e=>handleFieldChange('advancedUtilities',e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"advancedUtilities\",style:{marginLeft:'8px',fontSize:'13px',color:'#666'},children:\"$30/structure modeled from shop drawings. Please enter total number of structures to be included.\"})]})})]}),formData.advancedUtilities&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"structureCount\",children:\"Number of Structures\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"structureCount\",value:formData.structureCount,onChange:e=>handleFieldChange('structureCount',e.target.value),placeholder:\"Enter number of structures\",min:\"1\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"linework\",checked:formData.additionalRequests.includes('Linework Only'),onChange:()=>handleCheckboxChange('additionalRequests','Linework Only')}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"linework\",children:\"Linework Only\"})]}),formData.additionalRequests.includes('Linework Only')&&/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',marginTop:'2px',fontSize:'13px',color:'#dc2626',fontWeight:'500',textAlign:'center'},children:\"Caution: No surface will be generated when this option is checked. There will be no cut/fill values.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section form-section-centered\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:\"Additional Info\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"specialInstructions\",placeholder:\"Please provide any additional project information, specific requirements, or other requests...\",value:formData.specialInstructions,onChange:e=>handleFieldChange('specialInstructions',e.target.value),rows:\"3\",style:{width:'100%'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section form-section-centered file-upload-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:\"Upload Files\"}),/*#__PURE__*/_jsx(FileUploadWithFolders,{files:formData.fileAttachments||[],onFilesChange:files=>handleFieldChange('fileAttachments',files),disabled:isSubmitting,maxFiles:100,formType:serviceSelection.serviceType==='3D Model'?serviceSelection.proceedWork==='Quote Only'?'3d-quote':'3d-request':serviceSelection.proceedWork==='Quote Only'?'takeoff-quote':'takeoff-request',companyName:formData.company||'Unknown Company',projectName:formData.project||'Unknown Project'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleBack,children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isSubmitting,children:isSubmitting?'Submitting...':'Submit Request'})]}),Object.keys(errors).length>0&&/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:'10px',color:'#dc3545',fontSize:'14px'},children:\"Please fill out required areas\"})]});// Render Takeoff Request Form\nconst renderTakeoffForm=()=>{var _formData$scopeOption2,_formData$scopeOption3,_formData$scopeOption4,_formData$scopeOption5,_formData$scopeOption6;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,className:\"service-form condensed-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"form-title\",children:[\"Takeoff \",serviceSelection.proceedWork==='Quote Only'?'Quote':'Request']})}),submitMessage.text&&/*#__PURE__*/_jsx(\"div\",{className:\"submit-message \".concat(submitMessage.type),children:submitMessage.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"name\",children:[\"Name \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",placeholder:\"First and Last\",value:formData.name,onChange:e=>handleFieldChange('name',e.target.value),className:errors.name?'error-highlight':'',required:true}),errors.name&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"email\",children:[\"Email \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",placeholder:\"your@email.com\",value:formData.email,onChange:e=>handleFieldChange('email',e.target.value),className:errors.email?'error-highlight':'',required:true}),errors.email&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"company\",children:[\"Company Name \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"company\",placeholder:\"Your Company\",value:formData.company,onChange:e=>handleFieldChange('company',e.target.value),className:errors.company?'error-highlight':'',required:true}),errors.company&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.company})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"project\",children:[\"Project Name \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"project\",placeholder:\"Project Name\",value:formData.project,onChange:e=>handleFieldChange('project',e.target.value),className:errors.project?'error-highlight':'',required:true}),errors.project&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.project})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"dueDate\",children:[\"Due Date \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"dueDate\",value:formData.dueDate,onChange:e=>handleFieldChange('dueDate',e.target.value),className:errors.dueDate?'error-highlight':'',required:true}),errors.dueDate&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.dueDate})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"CAD Files Available? \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group-inline\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"radio-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"cadYes\",name:\"cadAvailable\",value:\"Yes\",checked:formData.cadAvailable==='Yes',onChange:e=>handleFieldChange('cadAvailable',e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cadYes\",children:\"Yes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"radio-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"cadNo\",name:\"cadAvailable\",value:\"No\",checked:formData.cadAvailable==='No',onChange:e=>handleFieldChange('cadAvailable',e.target.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cadNo\",children:\"No\"})]})]}),errors.cadAvailable&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.cadAvailable})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Scope Options \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-group-inline\",style:{flexDirection:'column',gap:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"earthworkCutFill\",checked:(_formData$scopeOption2=formData.scopeOptions)===null||_formData$scopeOption2===void 0?void 0:_formData$scopeOption2.includes('Earthwork Cut/Fill'),onChange:()=>handleCheckboxChange('scopeOptions','Earthwork Cut/Fill')}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"earthworkCutFill\",children:\"Earthwork Cut/Fill\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"utilities\",checked:(_formData$scopeOption3=formData.scopeOptions)===null||_formData$scopeOption3===void 0?void 0:_formData$scopeOption3.includes('Utilities (length/count and trench excavation)'),onChange:()=>handleCheckboxChange('scopeOptions','Utilities (length/count and trench excavation)')}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"utilities\",children:\"Utilities (length/count and trench excavation)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"subgrade\",checked:(_formData$scopeOption4=formData.scopeOptions)===null||_formData$scopeOption4===void 0?void 0:_formData$scopeOption4.includes('Subgrade Materials (stone, curb, asphalt, concrete, ect.)'),onChange:()=>handleCheckboxChange('scopeOptions','Subgrade Materials (stone, curb, asphalt, concrete, ect.)')}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"subgrade\",children:\"Subgrade Materials (stone, curb, asphalt, concrete, ect.)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-item-inline\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"erosion\",checked:(_formData$scopeOption5=formData.scopeOptions)===null||_formData$scopeOption5===void 0?void 0:_formData$scopeOption5.includes('Erosion Control (silt fence, matting, safety fence, baffles, ect.)'),onChange:()=>handleCheckboxChange('scopeOptions','Erosion Control (silt fence, matting, safety fence, baffles, ect.)')}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"erosion\",children:\"Erosion Control (silt fence, matting, safety fence, baffles, ect.)\"})]})]}),errors.scopeOptions&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.scopeOptions})]})]})}),((_formData$scopeOption6=formData.scopeOptions)===null||_formData$scopeOption6===void 0?void 0:_formData$scopeOption6.includes('Earthwork Cut/Fill'))&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-section conditional-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"strippingDepth\",style:{fontSize:'13px'},children:[\"Stripping Depth \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"strippingDepth\",placeholder:\"e.g., 6 inches, 0.5 feet\",value:formData.strippingDepth||'',onChange:e=>handleFieldChange('strippingDepth',e.target.value),className:errors.strippingDepth?'error-highlight':''}),errors.strippingDepth&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.strippingDepth})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"replacementDepth\",style:{fontSize:'13px'},children:[\"Replacement Depth \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"replacementDepth\",placeholder:\"e.g., 6 inches, 0.5 feet\",value:formData.replacementDepth||'',onChange:e=>handleFieldChange('replacementDepth',e.target.value),className:errors.replacementDepth?'error-highlight':''}),errors.replacementDepth&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.replacementDepth})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section form-section-centered\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:\"Additional Info\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"projectInfo\",placeholder:\"Please provide any additional project information, specific requirements, or scope details...\",value:formData.projectInfo||'',onChange:e=>handleFieldChange('projectInfo',e.target.value),rows:\"3\",style:{width:'100%'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section form-section-centered file-upload-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:\"Upload Files\"}),/*#__PURE__*/_jsx(FileUploadWithFolders,{files:formData.fileAttachments||[],onFilesChange:files=>handleFieldChange('fileAttachments',files),disabled:isSubmitting,maxFiles:100,formType:serviceSelection.serviceType==='3D Model'?serviceSelection.proceedWork==='Quote Only'?'3d-quote':'3d-request':serviceSelection.proceedWork==='Quote Only'?'takeoff-quote':'takeoff-request',companyName:formData.company||'Unknown Company',projectName:formData.project||'Unknown Project'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleBack,children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isSubmitting,children:isSubmitting?'Submitting...':'Submit Request'})]}),Object.keys(errors).length>0&&/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:'10px',color:'#dc3545',fontSize:'14px'},children:\"Please fill out required areas\"})]});};// Render confirmation page\nconst renderConfirmation=()=>{if(!submissionResult)return null;const title=submissionResult.proceedWork==='Quote Only'?'Quote Request Received!':'Service Request Submitted!';const message=\"Thank you for submitting your \".concat(submissionResult.serviceType,\" \").concat(submissionResult.proceedWork==='Quote Only'?'quote request':'service request',\". We will contact you soon.\");return/*#__PURE__*/_jsx(ConfirmationPage,{title:title,message:message,referenceNumber:submissionResult.referenceNumber,submissionData:submissionResult.submittedData,uploadedFiles:submissionResult.uploadedFiles,showDetails:true,onNewSubmission:handleNewSubmission});};// Main render\nreturn/*#__PURE__*/_jsx(AutoResizeWrapper,{padding:40,children:/*#__PURE__*/_jsxs(\"div\",{className:\"service-request-container\",children:[currentStep==='selection'&&renderSelectionStep(),currentStep==='form'&&serviceSelection.serviceType==='3D Model'&&renderModelForm(),currentStep==='form'&&serviceSelection.serviceType==='Takeoff'&&renderTakeoffForm(),currentStep==='confirmation'&&renderConfirmation()]})});};export default ServiceRequestForm;","map":{"version":3,"names":["React","useState","supabase","FileUploadWithFolders","SupabaseStorageService","ConfirmationPage","AutoResizeWrapper","sanitizeInput","isValidEmail","isValidPhone","generateSecureId","validateFormData","formSubmissionLimiter","maskSensitiveData","jsx","_jsx","jsxs","_jsxs","ServiceRequestForm","currentStep","setCurrentStep","serviceSelection","setServiceSelection","serviceType","proceedWork","formData","setFormData","name","email","company","project","state","phone","revision","dueDate","fileFormats","additionalRequests","erosionSurfaceDueDate","advancedUtilities","structureCount","cadAvailable","scopeOptions","strippingDepth","replacementDepth","projectInfo","specialInstructions","fileAttachments","errors","setErrors","isSubmitting","setIsSubmitting","submitMessage","setSubmitMessage","type","text","submissionResult","setSubmissionResult","scrollToFirstError","errorFields","firstErrorField","Object","keys","setTimeout","targetElement","document","getElementById","querySelector","concat","errorMessages","querySelectorAll","errorMsg","container","closest","input","elementRect","getBoundingClientRect","absoluteElementTop","top","window","pageYOffset","cushionSpace","targetScrollPosition","Math","max","scrollTo","behavior","tagName","focus","states","value","label","formatPhoneNumber","cleaned","replace","limited","substring","length","handleFieldChange","field","prev","_objectSpread","handleCheckboxChange","currentValues","newValues","includes","filter","v","validateSelection","newErrors","validateForm","_formData$scopeOption","console","log","handleSelectionSubmit","e","preventDefault","handleFormSubmit","rateLimitCheck","check","allowed","message","securityCheck","isValid","_formData$fileAttachm","stripPhonePrefix","tableName","submissionData","company_name","project_name","is_revision","finish_grade_due_date","file_formats","additional_requests","advanced_utility","structure_count","parseInt","erosion_surface_due_date","project_info","file_attachments","uploadedFiles","f","url","map","filename","size","path","split","slice","join","quote_due_date","price","quote_status","notes_from_ab_civil","date_quoted","quote_status_change_date","client_name","client_id","airtable_record_id","airtable_client_record_id","airtable_contact_record_id","airtable_created_date","last_modified_date","due_date","cad_available","scope_options","stripping_depth","replacement_depth","takeoff_status","data","error","from","insert","select","details","hint","code","file","uploadComplete","isLocal","referenceNumber","hasUploadedFiles","uploadedFilesLength","submittedData","handleNewSubmission","resetForm","handleBack","renderSelectionStep","className","children","onSubmit","id","checked","onChange","target","htmlFor","renderModelForm","placeholder","required","style","marginTop","marginBottom","width","fontSize","color","textAlign","marginLeft","min","fontWeight","rows","files","onFilesChange","disabled","maxFiles","formType","companyName","projectName","onClick","renderTakeoffForm","_formData$scopeOption2","_formData$scopeOption3","_formData$scopeOption4","_formData$scopeOption5","_formData$scopeOption6","flexDirection","gap","renderConfirmation","title","showDetails","onNewSubmission","padding"],"sources":["/Users/adambower/Dev/ab-civil-website-preview/src/shared/components/forms/ServiceRequestForm/ServiceRequestForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport './ServiceRequestForm.css';\nimport { supabase } from '../../../lib/supabase';\nimport FileUploadWithFolders from '../../FileUpload/FileUploadWithFolders';\nimport SupabaseStorageService from '../../../services/supabaseStorageService';\nimport ConfirmationPage from '../../ConfirmationPage/ConfirmationPage';\nimport AutoResizeWrapper from '../../AutoResizeWrapper/AutoResizeWrapper';\nimport { \n  sanitizeInput, \n  isValidEmail, \n  isValidPhone, \n  generateSecureId,\n  validateFormData,\n  formSubmissionLimiter,\n  maskSensitiveData \n} from '../../../utils/security';\n\nconst ServiceRequestForm = () => {\n  // State management\n  const [currentStep, setCurrentStep] = useState('selection'); // 'selection', 'form', or 'confirmation'\n  const [serviceSelection, setServiceSelection] = useState({\n    serviceType: '', // '3D Model' or 'Takeoff'\n    proceedWork: ''   // 'Yes' or 'Quote Only'\n  });\n  \n  const [formData, setFormData] = useState({\n    // Common fields\n    name: '',\n    email: '',\n    company: '',\n    project: '',\n    state: '',\n    phone: '',\n    \n    // Model specific fields\n    revision: '',\n    dueDate: '',\n    fileFormats: [],\n    additionalRequests: [],\n    erosionSurfaceDueDate: '', // Date for Initial Erosion Surface\n    advancedUtilities: false,   // Checkbox for 3D/Elevated Pipe\n    structureCount: '',         // Number input for advanced utilities\n    \n    // Takeoff specific fields\n    cadAvailable: '',\n    scopeOptions: [],  // Initialize as empty array for checkboxes\n    strippingDepth: '',\n    replacementDepth: '',\n    projectInfo: '',\n    \n    // Common optional fields\n    specialInstructions: '',\n    \n    // File attachments - Initialize as empty array\n    fileAttachments: []\n  });\n\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitMessage, setSubmitMessage] = useState({ type: '', text: '' });\n  const [submissionResult, setSubmissionResult] = useState(null);\n\n  // Function to scroll to first error\n  const scrollToFirstError = (errorFields) => {\n    // Find the first field with an error\n    const firstErrorField = Object.keys(errorFields)[0];\n    if (!firstErrorField) return;\n\n    // Add a small delay to let the error messages render\n    setTimeout(() => {\n      // Try to find the element with the error\n      let targetElement = null;\n      \n      // First try to find by ID\n      targetElement = document.getElementById(firstErrorField);\n      \n      // If not found, try to find by name attribute\n      if (!targetElement) {\n        targetElement = document.querySelector(`[name=\"${firstErrorField}\"]`);\n      }\n      \n      // If not found, try to find the error message itself and get its associated input\n      if (!targetElement) {\n        const errorMessages = document.querySelectorAll('.error-message');\n        for (const errorMsg of errorMessages) {\n          // Look for input/select/textarea in the same parent container\n          const container = errorMsg.closest('.input-wrapper') || errorMsg.closest('.form-row');\n          if (container) {\n            const input = container.querySelector('input, select, textarea');\n            if (input) {\n              targetElement = input;\n              break;\n            }\n          }\n        }\n      }\n      \n      // If we found an element, scroll to it with proper cushion\n      if (targetElement) {\n        // Calculate position with cushion space\n        const elementRect = targetElement.getBoundingClientRect();\n        const absoluteElementTop = elementRect.top + window.pageYOffset;\n        const cushionSpace = 150; // Space from top of viewport\n        const targetScrollPosition = Math.max(0, absoluteElementTop - cushionSpace);\n        \n        // Smooth scroll to position\n        window.scrollTo({\n          top: targetScrollPosition,\n          behavior: 'smooth'\n        });\n        \n        // Focus the field after scrolling completes\n        setTimeout(() => {\n          if (targetElement.tagName === 'INPUT' || targetElement.tagName === 'SELECT' || targetElement.tagName === 'TEXTAREA') {\n            targetElement.focus();\n          }\n        }, 500); // Wait for smooth scroll to complete\n      }\n    }, 100); // Small delay to ensure DOM is updated\n  };\n\n  // US States list\n  const states = [\n    { value: '', label: 'Select a state' },\n    { value: 'AL', label: 'Alabama' },\n    { value: 'AK', label: 'Alaska' },\n    { value: 'AZ', label: 'Arizona' },\n    { value: 'AR', label: 'Arkansas' },\n    { value: 'CA', label: 'California' },\n    { value: 'CO', label: 'Colorado' },\n    { value: 'CT', label: 'Connecticut' },\n    { value: 'DE', label: 'Delaware' },\n    { value: 'FL', label: 'Florida' },\n    { value: 'GA', label: 'Georgia' },\n    { value: 'HI', label: 'Hawaii' },\n    { value: 'ID', label: 'Idaho' },\n    { value: 'IL', label: 'Illinois' },\n    { value: 'IN', label: 'Indiana' },\n    { value: 'IA', label: 'Iowa' },\n    { value: 'KS', label: 'Kansas' },\n    { value: 'KY', label: 'Kentucky' },\n    { value: 'LA', label: 'Louisiana' },\n    { value: 'ME', label: 'Maine' },\n    { value: 'MD', label: 'Maryland' },\n    { value: 'MA', label: 'Massachusetts' },\n    { value: 'MI', label: 'Michigan' },\n    { value: 'MN', label: 'Minnesota' },\n    { value: 'MS', label: 'Mississippi' },\n    { value: 'MO', label: 'Missouri' },\n    { value: 'MT', label: 'Montana' },\n    { value: 'NE', label: 'Nebraska' },\n    { value: 'NV', label: 'Nevada' },\n    { value: 'NH', label: 'New Hampshire' },\n    { value: 'NJ', label: 'New Jersey' },\n    { value: 'NM', label: 'New Mexico' },\n    { value: 'NY', label: 'New York' },\n    { value: 'NC', label: 'North Carolina' },\n    { value: 'ND', label: 'North Dakota' },\n    { value: 'OH', label: 'Ohio' },\n    { value: 'OK', label: 'Oklahoma' },\n    { value: 'OR', label: 'Oregon' },\n    { value: 'PA', label: 'Pennsylvania' },\n    { value: 'RI', label: 'Rhode Island' },\n    { value: 'SC', label: 'South Carolina' },\n    { value: 'SD', label: 'South Dakota' },\n    { value: 'TN', label: 'Tennessee' },\n    { value: 'TX', label: 'Texas' },\n    { value: 'UT', label: 'Utah' },\n    { value: 'VT', label: 'Vermont' },\n    { value: 'VA', label: 'Virginia' },\n    { value: 'WA', label: 'Washington' },\n    { value: 'WV', label: 'West Virginia' },\n    { value: 'WI', label: 'Wisconsin' },\n    { value: 'WY', label: 'Wyoming' }\n  ];\n\n  // Phone number formatting with +1 prefix\n  const formatPhoneNumber = (value) => {\n    // Remove all non-digits and the +1 prefix if it exists\n    const cleaned = value.replace(/^\\+1\\s?/, '').replace(/\\D/g, '');\n    const limited = cleaned.substring(0, 10);\n    \n    if (limited.length === 0) return '';\n    if (limited.length <= 3) return `+1 (${limited}`;\n    if (limited.length <= 6) return `+1 (${limited.substring(0, 3)}) ${limited.substring(3)}`;\n    return `+1 (${limited.substring(0, 3)}) ${limited.substring(3, 6)}-${limited.substring(6)}`;\n  };\n\n  // Handle field changes with sanitization\n  const handleFieldChange = (field, value) => {\n    // Don't sanitize during input - only sanitize on submit\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n    // Clear error for this field\n    if (errors[field]) {\n      setErrors(prev => ({\n        ...prev,\n        [field]: ''\n      }));\n    }\n  };\n\n  // Handle checkbox changes\n  const handleCheckboxChange = (field, value) => {\n    setFormData(prev => {\n      const currentValues = prev[field];\n      const newValues = currentValues.includes(value)\n        ? currentValues.filter(v => v !== value)\n        : [...currentValues, value];\n      \n      return {\n        ...prev,\n        [field]: newValues\n      };\n    });\n  };\n\n  // Validate selection step\n  const validateSelection = () => {\n    const newErrors = {};\n    \n    if (!serviceSelection.serviceType) {\n      newErrors.serviceType = 'Please select a service type';\n    }\n    if (!serviceSelection.proceedWork) {\n      newErrors.proceedWork = 'Please select how to proceed';\n    }\n    \n    setErrors(newErrors);\n    if (Object.keys(newErrors).length > 0) {\n      scrollToFirstError(newErrors);\n    }\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Validate form based on type\n  const validateForm = () => {\n    const newErrors = {};\n    \n    // Common required fields with validation\n    if (!formData.name) {\n      newErrors.name = 'Name is required';\n    } else if (formData.name.length < 2 || formData.name.length > 100) {\n      newErrors.name = 'Name must be between 2 and 100 characters';\n    }\n    \n    if (!formData.email) {\n      newErrors.email = 'Email is required';\n    } else if (!isValidEmail(formData.email)) {\n      newErrors.email = 'Please enter a valid email address';\n    }\n    \n    if (!formData.company) {\n      newErrors.company = 'Company name is required';\n    } else if (formData.company.length < 2 || formData.company.length > 200) {\n      newErrors.company = 'Company name must be between 2 and 200 characters';\n    }\n    \n    if (!formData.project) {\n      newErrors.project = 'Project name is required';\n    } else if (formData.project.length < 2 || formData.project.length > 200) {\n      newErrors.project = 'Project name must be between 2 and 200 characters';\n    }\n    \n    // Model-specific validation\n    if (serviceSelection.serviceType === '3D Model') {\n      if (!formData.state) newErrors.state = 'Project state is required';\n      if (!formData.revision) newErrors.revision = 'Please specify if this is a revision';\n      if (!formData.dueDate) newErrors.dueDate = 'Due date is required';\n      if (formData.fileFormats.length === 0) newErrors.fileFormats = 'Please select at least one file format';\n      \n      // Validate erosion surface date if Initial Erosion Surface is selected\n      if (formData.additionalRequests.includes('Initial Erosion Surface') && !formData.erosionSurfaceDueDate) {\n        newErrors.erosionSurfaceDueDate = 'Initial Erosion Surface due date is required';\n      }\n    }\n    \n    // Takeoff-specific validation (no state field needed)\n    if (serviceSelection.serviceType === 'Takeoff') {\n      if (!formData.dueDate) newErrors.dueDate = 'Due date is required';\n      if (!formData.cadAvailable) newErrors.cadAvailable = 'Please specify if CAD files are available';\n      if (!formData.scopeOptions || formData.scopeOptions.length === 0) {\n        newErrors.scopeOptions = 'Please select at least one scope option';\n      }\n      \n      // Validate earthwork depth fields if Earthwork is selected\n      if (formData.scopeOptions?.includes('Earthwork Cut/Fill')) {\n        if (!formData.strippingDepth) newErrors.strippingDepth = 'Stripping depth is required when Earthwork Cut/Fill is selected';\n        if (!formData.replacementDepth) newErrors.replacementDepth = 'Replacement depth is required when Earthwork Cut/Fill is selected';\n      }\n    }\n    \n    setErrors(newErrors);\n    console.log('Validation errors:', newErrors);\n    if (Object.keys(newErrors).length > 0) {\n      scrollToFirstError(newErrors);\n    }\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Handle selection submission\n  const handleSelectionSubmit = (e) => {\n    e.preventDefault();\n    if (validateSelection()) {\n      setCurrentStep('form');\n      setErrors({});\n    }\n  };\n\n  // Handle form submission to Supabase with security checks\n  const handleFormSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Check rate limiting\n    const rateLimitCheck = formSubmissionLimiter.check(formData.email || 'anonymous');\n    if (!rateLimitCheck.allowed) {\n      setSubmitMessage({ \n        type: 'error', \n        text: rateLimitCheck.message \n      });\n      return;\n    }\n    \n    // Log with masked sensitive data\n    console.log('Form submission triggered');\n    console.log('Current formData:', maskSensitiveData(formData));\n    console.log('Service selection:', serviceSelection);\n    \n    if (!validateForm()) {\n      console.log('Validation failed. Errors:', errors);\n      return;\n    }\n    \n    // Additional security validation\n    const securityCheck = validateFormData(formData);\n    if (!securityCheck.isValid) {\n      setErrors(securityCheck.errors);\n      setSubmitMessage({ \n        type: 'error', \n        text: 'Invalid input detected. Please check your entries.' \n      });\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setSubmitMessage({ type: '', text: '' });\n    \n    try {\n      // Helper to strip +1 from phone numbers for database storage\n      const stripPhonePrefix = (phone) => {\n        if (!phone) return phone;\n        return phone.replace(/^\\+1\\s?/, '');\n      };\n\n      // Determine which table to use based on selection\n      let tableName = '';\n      if (serviceSelection.serviceType === '3D Model' && serviceSelection.proceedWork === 'Yes') {\n        tableName = 'model_requests';\n      } else if (serviceSelection.serviceType === '3D Model' && serviceSelection.proceedWork === 'Quote Only') {\n        tableName = 'model_quotes';\n      } else if (serviceSelection.serviceType === 'Takeoff' && serviceSelection.proceedWork === 'Yes') {\n        tableName = 'takeoff_requests';\n      } else if (serviceSelection.serviceType === 'Takeoff' && serviceSelection.proceedWork === 'Quote Only') {\n        tableName = 'takeoff_quotes';\n      }\n\n      // Prepare submission data based on form type\n      let submissionData = {};\n\n      // Add model-specific fields for model_requests table\n      if (serviceSelection.serviceType === '3D Model' && serviceSelection.proceedWork === 'Yes') {\n        submissionData = {\n          name: sanitizeInput(formData.name),\n          email: sanitizeInput(formData.email),\n          company_name: sanitizeInput(formData.company),\n          project_name: sanitizeInput(formData.project),\n          state: formData.state,\n          is_revision: formData.revision === 'Yes' ? true : false,\n          finish_grade_due_date: formData.dueDate,\n          file_formats: formData.fileFormats,  // JSONB - send as array\n          additional_requests: formData.additionalRequests.length > 0 ? formData.additionalRequests : null,  // JSONB\n          advanced_utility: formData.additionalRequests.includes('3D/Elevated Pipe') && formData.advancedUtilities === true,  // Only true if 3D/Elevated Pipe is selected AND Advanced Utilities is checked\n          structure_count: formData.additionalRequests.includes('3D/Elevated Pipe') && formData.advancedUtilities && formData.structureCount ? parseInt(formData.structureCount) : null,\n          erosion_surface_due_date: formData.additionalRequests.includes('Initial Erosion Surface') && formData.erosionSurfaceDueDate ? formData.erosionSurfaceDueDate : null,\n          project_info: formData.specialInstructions || null,\n          // Format file attachments for database JSONB column\n          file_attachments: (() => {\n            if (!formData.fileAttachments || formData.fileAttachments.length === 0) {\n              return null;\n            }\n            // Filter for uploaded files (those with a URL)\n            const uploadedFiles = formData.fileAttachments.filter(f => !!f.url);\n            if (uploadedFiles.length === 0) return null;\n            return uploadedFiles.map(f => ({\n              filename: f.filename,\n              url: f.url,\n              size: f.size,\n              path: f.path || f.url.split('/').slice(-2).join('/')\n            }));\n          })(),\n          // created_at and updated_at are handled by database defaults\n        };\n      }\n      // Add fields for model_quotes table\n      else if (serviceSelection.serviceType === '3D Model' && serviceSelection.proceedWork === 'Quote Only') {\n        submissionData = {\n          name: formData.name,\n          email: formData.email,\n          company_name: formData.company,\n          project_name: formData.project,\n          state: formData.state,\n          is_revision: formData.revision === 'Yes' ? true : false,\n          quote_due_date: formData.dueDate,  // Note: different field name than model_requests\n          file_formats: formData.fileFormats.length > 0 ? formData.fileFormats : null,  // text[] array\n          additional_requests: formData.additionalRequests.length > 0 ? formData.additionalRequests : null,  // text[] array\n          advanced_utility: formData.additionalRequests.includes('3D/Elevated Pipe') && formData.advancedUtilities === true,  // Only true if 3D/Elevated Pipe is selected AND Advanced Utilities is checked\n          structure_count: formData.additionalRequests.includes('3D/Elevated Pipe') && formData.advancedUtilities && formData.structureCount ? parseInt(formData.structureCount) : null,\n          erosion_surface_due_date: formData.additionalRequests.includes('Initial Erosion Surface') && formData.erosionSurfaceDueDate ? formData.erosionSurfaceDueDate : null,\n          project_info: formData.specialInstructions || null,\n          // Format file attachments for database JSONB column\n          file_attachments: (() => {\n            if (!formData.fileAttachments || formData.fileAttachments.length === 0) {\n              return null;\n            }\n            // Filter for uploaded files (those with a URL)\n            const uploadedFiles = formData.fileAttachments.filter(f => !!f.url);\n            if (uploadedFiles.length === 0) return null;\n            return uploadedFiles.map(f => ({\n              filename: f.filename,\n              url: f.url,\n              size: f.size,\n              path: f.path || f.url.split('/').slice(-2).join('/')\n            }));\n          })(),\n          // These fields will be null for new submissions\n          price: null,\n          quote_status: null,\n          notes_from_ab_civil: null,\n          date_quoted: null,\n          quote_status_change_date: null,\n          client_name: null,\n          client_id: null,\n          // Airtable fields null for web submissions\n          airtable_record_id: null,\n          airtable_client_record_id: null,\n          airtable_contact_record_id: null,\n          airtable_created_date: null,\n          last_modified_date: null,\n        };\n      }\n\n      // Add takeoff_requests table fields\n      else if (serviceSelection.serviceType === 'Takeoff' && serviceSelection.proceedWork === 'Yes') {\n        submissionData = {\n          name: formData.name,\n          email: formData.email,\n          phone: null,\n          company_name: formData.company,\n          project_name: formData.project,\n          due_date: formData.dueDate,\n          cad_available: formData.cadAvailable === 'Yes',\n          scope_options: formData.scopeOptions,  // JSONB array\n          stripping_depth: formData.strippingDepth || null,\n          replacement_depth: formData.replacementDepth || null,\n          project_info: formData.projectInfo || null,\n          takeoff_status: null,  // Explicitly set to null to avoid database default\n          // Format file attachments for database JSONB column\n          file_attachments: (() => {\n            if (!formData.fileAttachments || formData.fileAttachments.length === 0) {\n              return null;\n            }\n            // Filter for uploaded files (those with a URL)\n            const uploadedFiles = formData.fileAttachments.filter(f => !!f.url);\n            if (uploadedFiles.length === 0) return null;\n            return uploadedFiles.map(f => ({\n              filename: f.filename,\n              url: f.url,\n              size: f.size,\n              path: f.path || f.url.split('/').slice(-2).join('/')\n            }));\n          })(),\n          // created_at and updated_at are handled by database defaults\n        };\n      }\n      // Add takeoff_quotes table fields (same structure as takeoff_requests)\n      else if (serviceSelection.serviceType === 'Takeoff' && serviceSelection.proceedWork === 'Quote Only') {\n        submissionData = {\n          name: sanitizeInput(formData.name),\n          email: sanitizeInput(formData.email),\n          phone: null,\n          company_name: sanitizeInput(formData.company),\n          project_name: sanitizeInput(formData.project),\n          due_date: formData.dueDate,\n          cad_available: formData.cadAvailable === 'Yes',\n          scope_options: formData.scopeOptions,  // JSONB array\n          stripping_depth: formData.strippingDepth || null,\n          replacement_depth: formData.replacementDepth || null,\n          project_info: formData.projectInfo || null,\n          // Format file attachments for database JSONB column\n          file_attachments: (() => {\n            if (!formData.fileAttachments || formData.fileAttachments.length === 0) {\n              return null;\n            }\n            // Filter for uploaded files (those with a URL)\n            const uploadedFiles = formData.fileAttachments.filter(f => !!f.url);\n            if (uploadedFiles.length === 0) return null;\n            return uploadedFiles.map(f => ({\n              filename: f.filename,\n              url: f.url,\n              size: f.size,\n              path: f.path || f.url.split('/').slice(-2).join('/')\n            }));\n          })(),\n          // created_at and updated_at are handled by database defaults\n        };\n      }\n\n      // Insert into the appropriate table\n      \n      const { data, error } = await supabase\n        .from(tableName)\n        .insert([submissionData])\n        .select();\n\n\n      if (error) {\n        console.error('Supabase error details:', {\n          message: error.message,\n          details: error.details,\n          hint: error.hint,\n          code: error.code\n        });\n        throw error;\n      }\n\n      console.log('Submission successful:', data);\n\n      // Files are already uploaded, collect metadata for confirmation display\n      // Updated filter to be more inclusive - check for uploadComplete or has url\n      const uploadedFiles = formData.fileAttachments?.filter(file => \n        (file.uploadComplete === true) || (file.url && !file.isLocal)\n      ) || [];\n      console.log('Files successfully included in submission:', uploadedFiles.length);\n      console.log('[ServiceRequestForm] Filtered uploadedFiles details:', uploadedFiles);\n\n      // Success! Store submission data and show confirmation page\n      // Use secure random ID instead of timestamp\n      const referenceNumber = `SR-${generateSecureId(8)}`;\n      \n      // Debug logging for production\n      console.log('[ServiceRequestForm] Setting submissionResult with uploadedFiles:', {\n        hasUploadedFiles: !!uploadedFiles,\n        uploadedFilesLength: uploadedFiles ? uploadedFiles.length : 0,\n        uploadedFiles: uploadedFiles\n      });\n      \n      setSubmissionResult({\n        referenceNumber,\n        serviceType: serviceSelection.serviceType,\n        proceedWork: serviceSelection.proceedWork,\n        submittedData: {\n          ...formData,\n          serviceType: serviceSelection.serviceType,\n          proceedWork: serviceSelection.proceedWork\n        },\n        uploadedFiles: uploadedFiles\n      });\n      \n      setCurrentStep('confirmation');\n      \n    } catch (error) {\n      console.error('Submission error:', error);\n      console.error('Error details:', error.message);\n      setSubmitMessage({ \n        type: 'error', \n        text: `Error: ${error.message || 'There was an error submitting your request. Please try again.'}` \n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Handle new submission from confirmation page\n  const handleNewSubmission = () => {\n    resetForm();\n    setSubmissionResult(null);\n  };\n\n  // Reset form\n  const resetForm = () => {\n    setCurrentStep('selection');\n    setServiceSelection({\n      serviceType: '',\n      proceedWork: ''\n    });\n    setFormData({\n      name: '',\n      email: '',\n      company: '',\n      project: '',\n      state: '',\n      phone: '',\n      revision: '',\n      dueDate: '',\n      fileFormats: [],\n      additionalRequests: [],\n      erosionSurfaceDueDate: '',\n      advancedUtilities: false,\n      structureCount: '',\n      cadAvailable: '',\n      scopeOptions: [],\n      strippingDepth: '',\n      replacementDepth: '',\n      projectInfo: '',\n      specialInstructions: '',\n      fileAttachments: []\n    });\n    setErrors({});\n    setSubmitMessage({ type: '', text: '' });\n  };\n\n  // Handle back navigation\n  const handleBack = () => {\n    setCurrentStep('selection');\n    setErrors({});\n  };\n\n  // Render selection step\n  const renderSelectionStep = () => (\n    <div className=\"selection-container\">\n      <form onSubmit={handleSelectionSubmit}>\n        <div className=\"question-group\">\n          <p className=\"question\">Do you need a Model or a Takeoff? <span className=\"required\">*</span></p>\n          <div className=\"radio-group\">\n            <div className=\"radio-option\">\n              <input \n                type=\"radio\" \n                id=\"model\" \n                name=\"serviceType\" \n                value=\"3D Model\"\n                checked={serviceSelection.serviceType === '3D Model'}\n                onChange={(e) => setServiceSelection(prev => ({ ...prev, serviceType: e.target.value }))}\n              />\n              <label htmlFor=\"model\">3D Model</label>\n            </div>\n            <div className=\"radio-option\">\n              <input \n                type=\"radio\" \n                id=\"takeoff\" \n                name=\"serviceType\" \n                value=\"Takeoff\"\n                checked={serviceSelection.serviceType === 'Takeoff'}\n                onChange={(e) => setServiceSelection(prev => ({ ...prev, serviceType: e.target.value }))}\n              />\n              <label htmlFor=\"takeoff\">Takeoff</label>\n            </div>\n          </div>\n          {errors.serviceType && (\n            <span className=\"error-message\">{errors.serviceType}</span>\n          )}\n        </div>\n\n        <div className=\"question-group\">\n          <p className=\"question\">Proceed with the work? <span className=\"required\">*</span></p>\n          <div className=\"radio-group\">\n            <div className=\"radio-option\">\n              <input \n                type=\"radio\" \n                id=\"yes\" \n                name=\"proceedWork\" \n                value=\"Yes\"\n                checked={serviceSelection.proceedWork === 'Yes'}\n                onChange={(e) => setServiceSelection(prev => ({ ...prev, proceedWork: e.target.value }))}\n              />\n              <label htmlFor=\"yes\">Yes</label>\n            </div>\n            <div className=\"radio-option\">\n              <input \n                type=\"radio\" \n                id=\"quoteOnly\" \n                name=\"proceedWork\" \n                value=\"Quote Only\"\n                checked={serviceSelection.proceedWork === 'Quote Only'}\n                onChange={(e) => setServiceSelection(prev => ({ ...prev, proceedWork: e.target.value }))}\n              />\n              <label htmlFor=\"quoteOnly\">Quote Only</label>\n            </div>\n          </div>\n          {errors.proceedWork && (\n            <span className=\"error-message\">{errors.proceedWork}</span>\n          )}\n        </div>\n\n        <button type=\"submit\" className=\"btn btn-primary\">\n          Next\n        </button>\n      </form>\n    </div>\n  );\n\n  // Render Model Request Form\n  const renderModelForm = () => (\n    <form onSubmit={handleFormSubmit} className=\"service-form condensed-form\">\n      <div className=\"form-header\">\n        <h2 className=\"form-title\">\n          3D Model {serviceSelection.proceedWork === 'Quote Only' ? 'Quote' : 'Request'}\n        </h2>\n      </div>\n\n      {submitMessage.text && (\n        <div className={`submit-message ${submitMessage.type}`}>\n          {submitMessage.text}\n        </div>\n      )}\n\n      {/* Contact Information Section */}\n      <div className=\"form-section\">\n        <div className=\"form-row\">\n          <label htmlFor=\"name\">Name <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"text\"\n              id=\"name\"\n              placeholder=\"First and Last\"\n              value={formData.name}\n              onChange={(e) => handleFieldChange('name', e.target.value)}\n              className={errors.name ? 'error-highlight' : ''}\n              required\n            />\n            {errors.name && <span className=\"error-message\">{errors.name}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label htmlFor=\"email\">Email <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"email\"\n              id=\"email\"\n              placeholder=\"your@email.com\"\n              value={formData.email}\n              onChange={(e) => handleFieldChange('email', e.target.value)}\n              className={errors.email ? 'error-highlight' : ''}\n              required\n            />\n            {errors.email && <span className=\"error-message\">{errors.email}</span>}\n          </div>\n        </div>\n\n      </div>\n\n      {/* Project Information Section */}\n      <div className=\"form-section\">\n        <div className=\"form-row\">\n          <label htmlFor=\"company\">Company Name <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"text\"\n              id=\"company\"\n              placeholder=\"Your Company\"\n              value={formData.company}\n              onChange={(e) => handleFieldChange('company', e.target.value)}\n              className={errors.company ? 'error-highlight' : ''}\n              required\n            />\n            {errors.company && <span className=\"error-message\">{errors.company}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label htmlFor=\"project\">Project Name <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"text\"\n              id=\"project\"\n              placeholder=\"Project Name\"\n              value={formData.project}\n              onChange={(e) => handleFieldChange('project', e.target.value)}\n              className={errors.project ? 'error-highlight' : ''}\n              required\n            />\n            {errors.project && <span className=\"error-message\">{errors.project}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label htmlFor=\"state\">Project State <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <select\n              id=\"state\"\n              value={formData.state}\n              onChange={(e) => handleFieldChange('state', e.target.value)}\n              className={errors.state ? 'error-highlight' : ''}\n              required\n            >\n              {states.map(state => (\n                <option key={state.value} value={state.value}>{state.label}</option>\n              ))}\n            </select>\n            {errors.state && <span className=\"error-message\">{errors.state}</span>}\n          </div>\n        </div>\n      </div>\n\n      {/* Model Details Section */}\n      <div className=\"form-section\">\n        <div className=\"form-row\">\n          <label>Is this a revision to a current model? <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <div className=\"radio-group-inline\">\n              <div className=\"radio-item-inline\">\n                <input\n                  type=\"radio\"\n                  id=\"revisionYes\"\n                  name=\"revision\"\n                  value=\"Yes\"\n                  checked={formData.revision === 'Yes'}\n                  onChange={(e) => handleFieldChange('revision', e.target.value)}\n                />\n                <label htmlFor=\"revisionYes\">Yes</label>\n              </div>\n              <div className=\"radio-item-inline\">\n                <input\n                  type=\"radio\"\n                  id=\"revisionNo\"\n                  name=\"revision\"\n                  value=\"No\"\n                  checked={formData.revision === 'No'}\n                  onChange={(e) => handleFieldChange('revision', e.target.value)}\n                />\n                <label htmlFor=\"revisionNo\">No</label>\n              </div>\n            </div>\n            {errors.revision && <span className=\"error-message\">{errors.revision}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label htmlFor=\"dueDate\">Due Date <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"date\"\n              id=\"dueDate\"\n              value={formData.dueDate}\n              onChange={(e) => handleFieldChange('dueDate', e.target.value)}\n              className={errors.dueDate ? 'error-highlight' : ''}\n              required\n            />\n            {errors.dueDate && <span className=\"error-message\">{errors.dueDate}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label>File Formats <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <div className=\"checkbox-group-inline\">\n              <div className=\"checkbox-item-inline\">\n                <input\n                  type=\"checkbox\"\n                  id=\"trimble\"\n                  checked={formData.fileFormats.includes('Trimble')}\n                  onChange={() => handleCheckboxChange('fileFormats', 'Trimble')}\n                />\n                <label htmlFor=\"trimble\">Trimble</label>\n              </div>\n              <div className=\"checkbox-item-inline\">\n                <input\n                  type=\"checkbox\"\n                  id=\"topcon\"\n                  checked={formData.fileFormats.includes('Topcon')}\n                  onChange={() => handleCheckboxChange('fileFormats', 'Topcon')}\n                />\n                <label htmlFor=\"topcon\">Topcon</label>\n              </div>\n              <div className=\"checkbox-item-inline\">\n                <input\n                  type=\"checkbox\"\n                  id=\"leica\"\n                  checked={formData.fileFormats.includes('Leica')}\n                  onChange={() => handleCheckboxChange('fileFormats', 'Leica')}\n                />\n                <label htmlFor=\"leica\">Leica</label>\n              </div>\n            </div>\n            {errors.fileFormats && <span className=\"error-message\">{errors.fileFormats}</span>}\n          </div>\n        </div>\n\n      </div>\n\n      {/* Additional Requests Section - Centered */}\n      <div className=\"form-section form-section-centered\">\n        <div className=\"section-header\">Additional Requests</div>\n        <div className=\"checkbox-group-horizontal\">\n          <div className=\"checkbox-item-inline\">\n            <input\n              type=\"checkbox\"\n              id=\"erosion\"\n              checked={formData.additionalRequests.includes('Initial Erosion Surface')}\n              onChange={() => handleCheckboxChange('additionalRequests', 'Initial Erosion Surface')}\n            />\n            <label htmlFor=\"erosion\">Initial Erosion Surface</label>\n          </div>\n          {formData.additionalRequests.includes('Initial Erosion Surface') && (\n            <div className=\"form-section conditional-section\" style={{ marginTop: '8px', marginBottom: '8px' }}>\n              <div className=\"form-row\">\n                <label htmlFor=\"erosionSurfaceDueDate\">Erosion Surface Date <span className=\"required\">*</span></label>\n                <div className=\"input-wrapper\">\n                  <input\n                    type=\"date\"\n                    id=\"erosionSurfaceDueDate\"\n                    value={formData.erosionSurfaceDueDate}\n                    onChange={(e) => handleFieldChange('erosionSurfaceDueDate', e.target.value)}\n                    className={errors.erosionSurfaceDueDate ? 'error-highlight' : ''}\n                    required\n                  />\n                  {errors.erosionSurfaceDueDate && <span className=\"error-message\">{errors.erosionSurfaceDueDate}</span>}\n                </div>\n              </div>\n            </div>\n          )}\n          <div className=\"checkbox-item-inline\">\n            <input\n              type=\"checkbox\"\n              id=\"pipe\"\n              checked={formData.additionalRequests.includes('3D/Elevated Pipe')}\n              onChange={() => handleCheckboxChange('additionalRequests', '3D/Elevated Pipe')}\n            />\n            <label htmlFor=\"pipe\">3D/Elevated Pipe</label>\n          </div>\n          {formData.additionalRequests.includes('3D/Elevated Pipe') && (\n            <div style={{ width: '100%', marginTop: '2px', fontSize: '13px', color: '#666', textAlign: 'center' }}>\n              All gravity pipe linework will be elevated by invert elevation.\n            </div>\n          )}\n          {formData.additionalRequests.includes('3D/Elevated Pipe') && (\n            <div className=\"form-section conditional-section\" style={{ marginTop: '8px', marginBottom: '8px' }}>\n              <div className=\"form-row\">\n                <label>Advanced Utilities</label>\n                <div className=\"input-wrapper\">\n                  <div className=\"checkbox-item-inline advanced-utilities-checkbox\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"advancedUtilities\"\n                      checked={formData.advancedUtilities}\n                      onChange={(e) => handleFieldChange('advancedUtilities', e.target.checked)}\n                    />\n                    <label htmlFor=\"advancedUtilities\" style={{ marginLeft: '8px', fontSize: '13px', color: '#666' }}>\n                      $30/structure modeled from shop drawings. Please enter total number of structures to be included.\n                    </label>\n                  </div>\n                </div>\n              </div>\n              \n              {/* Show structure count input when Advanced Utilities is checked */}\n              {formData.advancedUtilities && (\n                <div className=\"form-row\">\n                  <label htmlFor=\"structureCount\">Number of Structures</label>\n                  <div className=\"input-wrapper\">\n                    <input\n                      type=\"number\"\n                      id=\"structureCount\"\n                      value={formData.structureCount}\n                      onChange={(e) => handleFieldChange('structureCount', e.target.value)}\n                      placeholder=\"Enter number of structures\"\n                      min=\"1\"\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n          <div className=\"checkbox-item-inline\">\n            <input\n              type=\"checkbox\"\n              id=\"linework\"\n              checked={formData.additionalRequests.includes('Linework Only')}\n              onChange={() => handleCheckboxChange('additionalRequests', 'Linework Only')}\n            />\n            <label htmlFor=\"linework\">Linework Only</label>\n          </div>\n          {formData.additionalRequests.includes('Linework Only') && (\n            <div style={{ width: '100%', marginTop: '2px', fontSize: '13px', color: '#dc2626', fontWeight: '500', textAlign: 'center' }}>\n              Caution: No surface will be generated when this option is checked. There will be no cut/fill values.\n            </div>\n          )}\n        </div>\n      </div>\n\n\n      {/* Additional Information Section */}\n      <div className=\"form-section form-section-centered\">\n        <div className=\"section-header\">Additional Info</div>\n        <textarea\n          id=\"specialInstructions\"\n          placeholder=\"Please provide any additional project information, specific requirements, or other requests...\"\n          value={formData.specialInstructions}\n          onChange={(e) => handleFieldChange('specialInstructions', e.target.value)}\n          rows=\"3\"\n          style={{ width: '100%' }}\n        />\n      </div>\n\n      {/* File Upload Section */}\n      <div className=\"form-section form-section-centered file-upload-section\">\n        <div className=\"section-header\">Upload Files</div>\n        <FileUploadWithFolders\n          files={formData.fileAttachments || []}\n          onFilesChange={(files) => handleFieldChange('fileAttachments', files)}\n          disabled={isSubmitting}\n          maxFiles={100}\n          formType={serviceSelection.serviceType === '3D Model' ? \n            (serviceSelection.proceedWork === 'Quote Only' ? '3d-quote' : '3d-request') :\n            (serviceSelection.proceedWork === 'Quote Only' ? 'takeoff-quote' : 'takeoff-request')\n          }\n          companyName={formData.company || 'Unknown Company'}\n          projectName={formData.project || 'Unknown Project'}\n        />\n      </div>\n\n      <div className=\"button-group\">\n        <button type=\"button\" className=\"btn btn-secondary\" onClick={handleBack}>\n          Back\n        </button>\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={isSubmitting}>\n          {isSubmitting ? 'Submitting...' : 'Submit Request'}\n        </button>\n      </div>\n      {Object.keys(errors).length > 0 && (\n        <div style={{ textAlign: 'center', marginTop: '10px', color: '#dc3545', fontSize: '14px' }}>\n          Please fill out required areas\n        </div>\n      )}\n    </form>\n  );\n\n  // Render Takeoff Request Form\n  const renderTakeoffForm = () => (\n    <form onSubmit={handleFormSubmit} className=\"service-form condensed-form\">\n      <div className=\"form-header\">\n        <h2 className=\"form-title\">\n          Takeoff {serviceSelection.proceedWork === 'Quote Only' ? 'Quote' : 'Request'}\n        </h2>\n      </div>\n\n      {submitMessage.text && (\n        <div className={`submit-message ${submitMessage.type}`}>\n          {submitMessage.text}\n        </div>\n      )}\n\n      {/* Contact Information Section */}\n      <div className=\"form-section\">\n        <div className=\"form-row\">\n          <label htmlFor=\"name\">Name <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"text\"\n              id=\"name\"\n              placeholder=\"First and Last\"\n              value={formData.name}\n              onChange={(e) => handleFieldChange('name', e.target.value)}\n              className={errors.name ? 'error-highlight' : ''}\n              required\n            />\n            {errors.name && <span className=\"error-message\">{errors.name}</span>}\n          </div>\n        </div>\n\n\n        <div className=\"form-row\">\n          <label htmlFor=\"email\">Email <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"email\"\n              id=\"email\"\n              placeholder=\"your@email.com\"\n              value={formData.email}\n              onChange={(e) => handleFieldChange('email', e.target.value)}\n              className={errors.email ? 'error-highlight' : ''}\n              required\n            />\n            {errors.email && <span className=\"error-message\">{errors.email}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label htmlFor=\"company\">Company Name <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"text\"\n              id=\"company\"\n              placeholder=\"Your Company\"\n              value={formData.company}\n              onChange={(e) => handleFieldChange('company', e.target.value)}\n              className={errors.company ? 'error-highlight' : ''}\n              required\n            />\n            {errors.company && <span className=\"error-message\">{errors.company}</span>}\n          </div>\n        </div>\n      </div>\n\n      {/* Project Details Section */}\n      <div className=\"form-section\">\n        <div className=\"form-row\">\n          <label htmlFor=\"project\">Project Name <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"text\"\n              id=\"project\"\n              placeholder=\"Project Name\"\n              value={formData.project}\n              onChange={(e) => handleFieldChange('project', e.target.value)}\n              className={errors.project ? 'error-highlight' : ''}\n              required\n            />\n            {errors.project && <span className=\"error-message\">{errors.project}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label htmlFor=\"dueDate\">Due Date <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"date\"\n              id=\"dueDate\"\n              value={formData.dueDate}\n              onChange={(e) => handleFieldChange('dueDate', e.target.value)}\n              className={errors.dueDate ? 'error-highlight' : ''}\n              required\n            />\n            {errors.dueDate && <span className=\"error-message\">{errors.dueDate}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label>CAD Files Available? <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <div className=\"radio-group-inline\">\n              <div className=\"radio-item-inline\">\n                <input\n                  type=\"radio\"\n                  id=\"cadYes\"\n                  name=\"cadAvailable\"\n                  value=\"Yes\"\n                  checked={formData.cadAvailable === 'Yes'}\n                  onChange={(e) => handleFieldChange('cadAvailable', e.target.value)}\n                />\n                <label htmlFor=\"cadYes\">Yes</label>\n              </div>\n              <div className=\"radio-item-inline\">\n                <input\n                  type=\"radio\"\n                  id=\"cadNo\"\n                  name=\"cadAvailable\"\n                  value=\"No\"\n                  checked={formData.cadAvailable === 'No'}\n                  onChange={(e) => handleFieldChange('cadAvailable', e.target.value)}\n                />\n                <label htmlFor=\"cadNo\">No</label>\n              </div>\n            </div>\n            {errors.cadAvailable && <span className=\"error-message\">{errors.cadAvailable}</span>}\n          </div>\n        </div>\n      </div>\n\n      {/* Scope Options Section */}\n      <div className=\"form-section\">\n        <div className=\"form-row\">\n          <label>Scope Options <span className=\"required\">*</span></label>\n          <div className=\"input-wrapper\">\n            <div className=\"checkbox-group-inline\" style={{ flexDirection: 'column', gap: '12px' }}>\n              <div className=\"checkbox-item-inline\">\n                <input\n                  type=\"checkbox\"\n                  id=\"earthworkCutFill\"\n                  checked={formData.scopeOptions?.includes('Earthwork Cut/Fill')}\n                  onChange={() => handleCheckboxChange('scopeOptions', 'Earthwork Cut/Fill')}\n                />\n                <label htmlFor=\"earthworkCutFill\">Earthwork Cut/Fill</label>\n              </div>\n              <div className=\"checkbox-item-inline\">\n                <input\n                  type=\"checkbox\"\n                  id=\"utilities\"\n                  checked={formData.scopeOptions?.includes('Utilities (length/count and trench excavation)')}\n                  onChange={() => handleCheckboxChange('scopeOptions', 'Utilities (length/count and trench excavation)')}\n                />\n                <label htmlFor=\"utilities\">Utilities (length/count and trench excavation)</label>\n              </div>\n              <div className=\"checkbox-item-inline\">\n                <input\n                  type=\"checkbox\"\n                  id=\"subgrade\"\n                  checked={formData.scopeOptions?.includes('Subgrade Materials (stone, curb, asphalt, concrete, ect.)')}\n                  onChange={() => handleCheckboxChange('scopeOptions', 'Subgrade Materials (stone, curb, asphalt, concrete, ect.)')}\n                />\n                <label htmlFor=\"subgrade\">Subgrade Materials (stone, curb, asphalt, concrete, ect.)</label>\n              </div>\n              <div className=\"checkbox-item-inline\">\n                <input\n                  type=\"checkbox\"\n                  id=\"erosion\"\n                  checked={formData.scopeOptions?.includes('Erosion Control (silt fence, matting, safety fence, baffles, ect.)')}\n                  onChange={() => handleCheckboxChange('scopeOptions', 'Erosion Control (silt fence, matting, safety fence, baffles, ect.)')}\n                />\n                <label htmlFor=\"erosion\">Erosion Control (silt fence, matting, safety fence, baffles, ect.)</label>\n              </div>\n            </div>\n            {errors.scopeOptions && <span className=\"error-message\">{errors.scopeOptions}</span>}\n          </div>\n        </div>\n      </div>\n\n      {/* Conditional earthwork depth fields */}\n      {formData.scopeOptions?.includes('Earthwork Cut/Fill') && (\n        <div className=\"form-section conditional-section\">\n          <div className=\"form-row\">\n            <label htmlFor=\"strippingDepth\" style={{ fontSize: '13px' }}>Stripping Depth <span className=\"required\">*</span></label>\n            <div className=\"input-wrapper\">\n              <input\n                type=\"text\"\n                id=\"strippingDepth\"\n                placeholder=\"e.g., 6 inches, 0.5 feet\"\n                value={formData.strippingDepth || ''}\n                onChange={(e) => handleFieldChange('strippingDepth', e.target.value)}\n                className={errors.strippingDepth ? 'error-highlight' : ''}\n              />\n              {errors.strippingDepth && <span className=\"error-message\">{errors.strippingDepth}</span>}\n            </div>\n          </div>\n          \n          <div className=\"form-row\">\n            <label htmlFor=\"replacementDepth\" style={{ fontSize: '13px' }}>Replacement Depth <span className=\"required\">*</span></label>\n            <div className=\"input-wrapper\">\n              <input\n                type=\"text\"\n                id=\"replacementDepth\"\n                placeholder=\"e.g., 6 inches, 0.5 feet\"\n                value={formData.replacementDepth || ''}\n                onChange={(e) => handleFieldChange('replacementDepth', e.target.value)}\n                className={errors.replacementDepth ? 'error-highlight' : ''}\n              />\n              {errors.replacementDepth && <span className=\"error-message\">{errors.replacementDepth}</span>}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Additional Information Section */}\n      <div className=\"form-section form-section-centered\">\n        <div className=\"section-header\">Additional Info</div>\n        <textarea\n          id=\"projectInfo\"\n          placeholder=\"Please provide any additional project information, specific requirements, or scope details...\"\n          value={formData.projectInfo || ''}\n          onChange={(e) => handleFieldChange('projectInfo', e.target.value)}\n          rows=\"3\"\n          style={{ width: '100%' }}\n        />\n      </div>\n\n      {/* File Upload Section */}\n      <div className=\"form-section form-section-centered file-upload-section\">\n        <div className=\"section-header\">Upload Files</div>\n        <FileUploadWithFolders\n          files={formData.fileAttachments || []}\n          onFilesChange={(files) => handleFieldChange('fileAttachments', files)}\n          disabled={isSubmitting}\n          maxFiles={100}\n          formType={serviceSelection.serviceType === '3D Model' ? \n            (serviceSelection.proceedWork === 'Quote Only' ? '3d-quote' : '3d-request') :\n            (serviceSelection.proceedWork === 'Quote Only' ? 'takeoff-quote' : 'takeoff-request')\n          }\n          companyName={formData.company || 'Unknown Company'}\n          projectName={formData.project || 'Unknown Project'}\n        />\n      </div>\n\n      <div className=\"button-group\">\n        <button type=\"button\" className=\"btn btn-secondary\" onClick={handleBack}>\n          Back\n        </button>\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={isSubmitting}>\n          {isSubmitting ? 'Submitting...' : 'Submit Request'}\n        </button>\n      </div>\n      {Object.keys(errors).length > 0 && (\n        <div style={{ textAlign: 'center', marginTop: '10px', color: '#dc3545', fontSize: '14px' }}>\n          Please fill out required areas\n        </div>\n      )}\n    </form>\n  );\n\n  // Render confirmation page\n  const renderConfirmation = () => {\n    if (!submissionResult) return null;\n    \n    const title = submissionResult.proceedWork === 'Quote Only'\n      ? 'Quote Request Received!'\n      : 'Service Request Submitted!';\n      \n    const message = `Thank you for submitting your ${submissionResult.serviceType} ${submissionResult.proceedWork === 'Quote Only' ? 'quote request' : 'service request'}. We will contact you soon.`;\n    \n    return (\n      <ConfirmationPage\n        title={title}\n        message={message}\n        referenceNumber={submissionResult.referenceNumber}\n        submissionData={submissionResult.submittedData}\n        uploadedFiles={submissionResult.uploadedFiles}\n        showDetails={true}\n        onNewSubmission={handleNewSubmission}\n      />\n    );\n  };\n\n  // Main render\n  return (\n    <AutoResizeWrapper padding={40}>\n      <div className=\"service-request-container\">\n        {currentStep === 'selection' && renderSelectionStep()}\n        {currentStep === 'form' && serviceSelection.serviceType === '3D Model' && renderModelForm()}\n        {currentStep === 'form' && serviceSelection.serviceType === 'Takeoff' && renderTakeoffForm()}\n        {currentStep === 'confirmation' && renderConfirmation()}\n      </div>\n    </AutoResizeWrapper>\n  );\n};\n\nexport default ServiceRequestForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}