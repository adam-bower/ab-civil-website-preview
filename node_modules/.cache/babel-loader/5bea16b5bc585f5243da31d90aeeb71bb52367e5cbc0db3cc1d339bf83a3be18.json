{"ast":null,"code":"import _objectSpread from\"/Users/adambower/Dev/ab-civil-website-preview/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import'./ClientIntakeForm.css';import{supabase}from'../../../lib/supabase';import ConfirmationPage from'../../ConfirmationPage/ConfirmationPage';import{sanitizeInput,isValidEmail,isValidPhone,generateSecureId,validateFormData,formSubmissionLimiter,maskSensitiveData}from'../../../utils/security';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ClientIntakeForm=()=>{// State management\nconst[currentStep,setCurrentStep]=useState(0);const[currentContactIndex,setCurrentContactIndex]=useState(0);const[isSubmitting,setIsSubmitting]=useState(false);const[submitMessage,setSubmitMessage]=useState({type:'',text:''});const[submissionResult,setSubmissionResult]=useState(null);const[showConfirmation,setShowConfirmation]=useState(false);const[formData,setFormData]=useState({company:{company_name:'',company_address:'',city:'',state:'',zip_code:'',company_phone:'',email_w9_coi:'',services_used:[],machine_control_brands:[],source_type:'',platform:'',platform_other:'',dealer_name:'',contractor_name:'',other_source_detail:''},contacts:[]});const[currentContact,setCurrentContact]=useState({name:'',phone_number:'',email:'',position:'',receives_invoices:false,another_contact:''});const[showConditionalFields,setShowConditionalFields]=useState({platform:false,otherPlatform:false,dealer:false,contractor:false,otherSource:false});const[errors,setErrors]=useState({});// US States list\nconst states=[{value:'',label:'State / Province'},{value:'AL',label:'Alabama'},{value:'AK',label:'Alaska'},{value:'AZ',label:'Arizona'},{value:'AR',label:'Arkansas'},{value:'CA',label:'California'},{value:'CO',label:'Colorado'},{value:'CT',label:'Connecticut'},{value:'DE',label:'Delaware'},{value:'FL',label:'Florida'},{value:'GA',label:'Georgia'},{value:'HI',label:'Hawaii'},{value:'ID',label:'Idaho'},{value:'IL',label:'Illinois'},{value:'IN',label:'Indiana'},{value:'IA',label:'Iowa'},{value:'KS',label:'Kansas'},{value:'KY',label:'Kentucky'},{value:'LA',label:'Louisiana'},{value:'ME',label:'Maine'},{value:'MD',label:'Maryland'},{value:'MA',label:'Massachusetts'},{value:'MI',label:'Michigan'},{value:'MN',label:'Minnesota'},{value:'MS',label:'Mississippi'},{value:'MO',label:'Missouri'},{value:'MT',label:'Montana'},{value:'NE',label:'Nebraska'},{value:'NV',label:'Nevada'},{value:'NH',label:'New Hampshire'},{value:'NJ',label:'New Jersey'},{value:'NM',label:'New Mexico'},{value:'NY',label:'New York'},{value:'NC',label:'North Carolina'},{value:'ND',label:'North Dakota'},{value:'OH',label:'Ohio'},{value:'OK',label:'Oklahoma'},{value:'OR',label:'Oregon'},{value:'PA',label:'Pennsylvania'},{value:'RI',label:'Rhode Island'},{value:'SC',label:'South Carolina'},{value:'SD',label:'South Dakota'},{value:'TN',label:'Tennessee'},{value:'TX',label:'Texas'},{value:'UT',label:'Utah'},{value:'VT',label:'Vermont'},{value:'VA',label:'Virginia'},{value:'WA',label:'Washington'},{value:'WV',label:'West Virginia'},{value:'WI',label:'Wisconsin'},{value:'WY',label:'Wyoming'},{value:'DC',label:'District of Columbia'}];// Phone number formatting with +1 prefix\nconst formatPhoneNumber=value=>{// Remove all non-digits and the +1 prefix if it exists\nconst cleaned=value.replace(/^\\+1\\s?/,'').replace(/\\D/g,'');const limited=cleaned.substring(0,10);if(limited.length===0)return'';if(limited.length<=3)return\"+1 (\".concat(limited);if(limited.length<=6)return\"+1 (\".concat(limited.substring(0,3),\") \").concat(limited.substring(3));return\"+1 (\".concat(limited.substring(0,3),\") \").concat(limited.substring(3,6),\"-\").concat(limited.substring(6));};// Handle company field changes with sanitization\nconst handleCompanyChange=(field,value)=>{// Don't sanitize during input - only sanitize on submit\nsetFormData(prev=>_objectSpread(_objectSpread({},prev),{},{company:_objectSpread(_objectSpread({},prev.company),{},{[field]:value})}));};// Handle service checkbox changes\nconst handleServiceChange=service=>{setFormData(prev=>{const services=prev.company.services_used;const newServices=services.includes(service)?services.filter(s=>s!==service):[...services,service];return _objectSpread(_objectSpread({},prev),{},{company:_objectSpread(_objectSpread({},prev.company),{},{services_used:newServices})});});};// Handle machine brand checkbox changes\nconst handleMachineBrandChange=brand=>{setFormData(prev=>{const brands=prev.company.machine_control_brands;const newBrands=brands.includes(brand)?brands.filter(b=>b!==brand):[...brands,brand];return _objectSpread(_objectSpread({},prev),{},{company:_objectSpread(_objectSpread({},prev.company),{},{machine_control_brands:newBrands})});});};// Handle source selection\nconst handleSourceChange=value=>{handleCompanyChange('source_type',value);// Reset conditional fields\nsetShowConditionalFields({platform:value==='social-media',dealer:value==='dealer',contractor:value==='current-client',otherSource:value==='other',otherPlatform:false});// Clear conditional field values\nif(value!=='social-media'){handleCompanyChange('platform','');handleCompanyChange('platform_other','');}if(value!=='dealer'){handleCompanyChange('dealer_name','');}if(value!=='current-client'){handleCompanyChange('contractor_name','');}if(value!=='other'){handleCompanyChange('other_source_detail','');}};// Handle platform selection\nconst handlePlatformChange=value=>{handleCompanyChange('platform',value);setShowConditionalFields(prev=>_objectSpread(_objectSpread({},prev),{},{otherPlatform:value==='Other'}));if(value!=='Other'){handleCompanyChange('platform_other','');}};// Handle contact field changes with sanitization\nconst handleContactChange=(field,value)=>{// Don't sanitize during input - only sanitize on submit\nsetCurrentContact(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};// Validate company form\nconst validateCompanyForm=()=>{const newErrors={};const{company}=formData;if(!company.company_name){newErrors.company_name='Company name is required';}else if(company.company_name.length<2||company.company_name.length>200){newErrors.company_name='Company name must be between 2 and 200 characters';}if(!company.company_address){newErrors.company_address='Company address is required';}else if(company.company_address.length<5||company.company_address.length>500){newErrors.company_address='Address must be between 5 and 500 characters';}if(!company.company_phone){newErrors.company_phone='Company phone is required';}else if(!isValidPhone(company.company_phone)){newErrors.company_phone='Please enter a valid 10-digit phone number';}if(!company.email_w9_coi){newErrors.email_w9_coi='Email is required';}else if(!isValidEmail(company.email_w9_coi)){newErrors.email_w9_coi='Please enter a valid email address';}if(company.services_used.length===0)newErrors.services='Please select at least one service';if(!company.source_type)newErrors.source='Please select how you found out about us';// Validate conditional fields\nif(company.source_type==='social-media'&&!company.platform){newErrors.platform='Please select a platform';}if(company.platform==='Other'&&!company.platform_other){newErrors.platform_other='Please specify the platform';}if(company.source_type==='dealer'&&!company.dealer_name){newErrors.dealer_name='Please enter the dealer name';}if(company.source_type==='current-client'&&!company.contractor_name){newErrors.contractor_name='Please enter the contractor name';}if(company.source_type==='other'&&!company.other_source_detail){newErrors.other_source_detail='Please specify how you found out about us';}setErrors(newErrors);return Object.keys(newErrors).length===0;};// Validate contact form\nconst validateContactForm=()=>{const newErrors={};if(!currentContact.name){newErrors.contact_name='Name is required';}else if(currentContact.name.length<2||currentContact.name.length>100){newErrors.contact_name='Name must be between 2 and 100 characters';}if(!currentContact.phone_number){newErrors.contact_phone='Phone number is required';}else if(!isValidPhone(currentContact.phone_number)){newErrors.contact_phone='Please enter a valid 10-digit phone number';}if(!currentContact.email){newErrors.contact_email='Email is required';}else if(!isValidEmail(currentContact.email)){newErrors.contact_email='Please enter a valid email address';}if(!currentContact.position)newErrors.position='Please select a position';if(currentContact.receives_invoices==='')newErrors.receives_invoices='Please specify if this contact receives invoices';const contactNumber=currentContactIndex+1;if(contactNumber<5&&!currentContact.another_contact){newErrors.another_contact='Please specify if you need to submit another contact';}setErrors(newErrors);return Object.keys(newErrors).length===0;};// Handle company form submission\nconst handleCompanySubmit=e=>{e.preventDefault();if(validateCompanyForm()){setCurrentStep(1);setErrors({});}};// Handle contact form submission\nconst handleContactSubmit=e=>{e.preventDefault();if(validateContactForm()){// Save current contact\nconst contactData={name:currentContact.name,phone_number:currentContact.phone_number,email:currentContact.email,position:currentContact.position,receives_invoices:currentContact.receives_invoices==='yes',created_at:new Date().toISOString()};const newContacts=[...formData.contacts];newContacts[currentContactIndex]=contactData;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{contacts:newContacts}));// Check if adding another contact\nif(currentContact.another_contact==='yes'&&formData.contacts.length<5){setCurrentContactIndex(prev=>prev+1);setCurrentContact({name:'',phone_number:'',email:'',position:'',receives_invoices:'',another_contact:''});setErrors({});}else{// Go to review step\nsetCurrentStep(2);setErrors({});}}};// Handle back navigation\nconst handleBack=()=>{if(currentStep===1&&currentContactIndex>0){// Go to previous contact\nsetCurrentContactIndex(prev=>prev-1);const prevContact=formData.contacts[currentContactIndex-1];if(prevContact){setCurrentContact({name:prevContact.name,phone_number:prevContact.phone_number,email:prevContact.email,position:prevContact.position,receives_invoices:prevContact.receives_invoices?'yes':'no',another_contact:currentContactIndex<formData.contacts.length-1?'yes':'no'});}}else if(currentStep>0){setCurrentStep(prev=>prev-1);setErrors({});}};// Handle final submission to Supabase with security checks\nconst handleFinalSubmit=async()=>{// Check rate limiting\nconst rateLimitCheck=formSubmissionLimiter.check(formData.company.email_w9_coi||'anonymous');if(!rateLimitCheck.allowed){setSubmitMessage({type:'error',text:rateLimitCheck.message});return;}// Additional security validation\nconst companySecurityCheck=validateFormData(formData.company);if(!companySecurityCheck.isValid){setSubmitMessage({type:'error',text:'Invalid input detected in company information. Please check your entries.'});return;}// Validate each contact\nfor(const contact of formData.contacts){const contactSecurityCheck=validateFormData(contact);if(!contactSecurityCheck.isValid){setSubmitMessage({type:'error',text:'Invalid input detected in contact information. Please check your entries.'});return;}}setIsSubmitting(true);setSubmitMessage({type:'',text:''});try{// Helper to strip +1 from phone numbers for database storage\nconst stripPhonePrefix=phone=>{if(!phone)return phone;return phone.replace(/^\\+1\\s?/,'');};// Prepare data for client_intake table\nconst intakeData={// Company fields\ncompany_name:sanitizeInput(formData.company.company_name),company_address:sanitizeInput(formData.company.company_address),city:sanitizeInput(formData.company.city),state:formData.company.state,zip_code:formData.company.zip_code,company_phone:stripPhonePrefix(formData.company.company_phone),email_w9_coi:sanitizeInput(formData.company.email_w9_coi),// Source fields - remove enum values by not including them\nsource_type:formData.company.source_type,platform_other:sanitizeInput(formData.company.platform_other)||null,dealer_name:sanitizeInput(formData.company.dealer_name)||null,contractor_name:sanitizeInput(formData.company.contractor_name)||null,other_source_detail:sanitizeInput(formData.company.other_source_detail)||null,// Services and brands as arrays\nservices_used:formData.company.services_used.length>0?formData.company.services_used:null,machine_control_brands:formData.company.machine_control_brands.length>0?formData.company.machine_control_brands:null,// Total contacts\ntotal_contacts:formData.contacts.length,created_at:new Date().toISOString()};// Add contact fields (up to 5 contacts)\nformData.contacts.forEach((contact,index)=>{const num=index+1;intakeData[\"contact_\".concat(num,\"_name\")]=sanitizeInput(contact.name);intakeData[\"contact_\".concat(num,\"_phone\")]=stripPhonePrefix(contact.phone_number);intakeData[\"contact_\".concat(num,\"_email\")]=sanitizeInput(contact.email);intakeData[\"contact_\".concat(num,\"_position\")]=contact.position||null;intakeData[\"contact_\".concat(num,\"_receives_invoices\")]=contact.receives_invoices===true||contact.receives_invoices==='yes';});// Insert into client_intake table\nconst{error}=await supabase.from('client_intake').insert([intakeData]).select().single();if(error){throw error;}// Success! Store submission data and show confirmation page\n// Use secure random ID instead of timestamp\nconst referenceNumber=\"CI-\".concat(generateSecureId(8));// Format source_type for display\nconst formatSourceType=type=>{const sourceMap={'social-media':'Social Media','dealer':'Dealer','current-client':'Current Client','email-marketing':'Email/Text','search-engine':'Google','other':'Other'};return sourceMap[type]||type;};setSubmissionResult({referenceNumber,submittedData:{company:_objectSpread(_objectSpread({},formData.company),{},{source_type:formatSourceType(formData.company.source_type)}),contacts:formData.contacts}});setShowConfirmation(true);}catch(error){// Log error with masked sensitive data\nconsole.error('Submission error:',maskSensitiveData(error));setSubmitMessage({type:'error',text:'There was an error submitting your information. Please try again or contact us directly.'});}finally{setIsSubmitting(false);}};// Handle new submission from confirmation page\nconst handleNewSubmission=()=>{resetForm();setSubmissionResult(null);setShowConfirmation(false);};// Reset form to initial state\nconst resetForm=()=>{setCurrentStep(0);setCurrentContactIndex(0);setFormData({company:{company_name:'',company_address:'',city:'',state:'',zip_code:'',company_phone:'',email_w9_coi:'',services_used:[],machine_control_brands:[],source_type:'',platform:'',platform_other:'',dealer_name:'',contractor_name:'',other_source_detail:''},contacts:[]});setCurrentContact({name:'',phone_number:'',email:'',position:'',receives_invoices:'',another_contact:''});setShowConditionalFields({platform:false,otherPlatform:false,dealer:false,contractor:false,otherSource:false});setErrors({});setSubmitMessage({type:'',text:''});};// Render company form\nconst renderCompanyForm=()=>/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCompanySubmit,className:\"form-step condensed-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"form-title\",children:\"Business Information\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"company-name\",children:[\"Company Name \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"company-name\",placeholder:\"Type your answer\",value:formData.company.company_name,onChange:e=>handleCompanyChange('company_name',e.target.value),className:errors.company_name?'error-highlight':'',required:true}),errors.company_name&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.company_name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"company-address\",children:[\"Company Address \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"company-address\",placeholder:\"Street Address\",value:formData.company.company_address,onChange:e=>handleCompanyChange('company_address',e.target.value),className:errors.company_address?'error-highlight':'',required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"address-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"City\",value:formData.company.city,onChange:e=>handleCompanyChange('city',e.target.value)}),/*#__PURE__*/_jsx(\"select\",{value:formData.company.state,onChange:e=>handleCompanyChange('state',e.target.value),children:states.map(state=>/*#__PURE__*/_jsx(\"option\",{value:state.value,children:state.label},state.value))}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"ZIP\",value:formData.company.zip_code,onChange:e=>{const value=e.target.value.replace(/\\D/g,'').substring(0,5);handleCompanyChange('zip_code',value);},maxLength:\"5\"})]}),errors.company_address&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.company_address})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"company-phone\",children:[\"Company Phone \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"company-phone\",placeholder:\"+1 (___) ___-____\",value:formData.company.company_phone,onChange:e=>handleCompanyChange('company_phone',formatPhoneNumber(e.target.value)),className:errors.company_phone?'error-highlight':'',maxLength:\"17\",required:true}),errors.company_phone&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.company_phone})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"email-w9\",children:[\"Email for W9/COI \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email-w9\",placeholder:\"email@company.com\",value:formData.company.email_w9_coi,onChange:e=>handleCompanyChange('email_w9_coi',e.target.value),className:errors.email_w9_coi?'error-highlight':'',required:true}),errors.email_w9_coi&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.email_w9_coi})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Services Needed \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-group-inline\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-item-inline\",htmlFor:\"service-3d-model\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"service-3d-model\",checked:formData.company.services_used.includes('3D Models'),onChange:()=>handleServiceChange('3D Models')}),/*#__PURE__*/_jsx(\"span\",{children:\"3D Models\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-item-inline\",htmlFor:\"service-takeoff\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"service-takeoff\",checked:formData.company.services_used.includes('Takeoffs'),onChange:()=>handleServiceChange('Takeoffs')}),/*#__PURE__*/_jsx(\"span\",{children:\"Takeoffs\"})]})]}),errors.services&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.services})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Machine Control\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-group-inline\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-item-inline\",htmlFor:\"brand-trimble\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"brand-trimble\",checked:formData.company.machine_control_brands.includes('Trimble'),onChange:()=>handleMachineBrandChange('Trimble')}),/*#__PURE__*/_jsx(\"span\",{children:\"Trimble\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-item-inline\",htmlFor:\"brand-topcon\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"brand-topcon\",checked:formData.company.machine_control_brands.includes('Topcon'),onChange:()=>handleMachineBrandChange('Topcon')}),/*#__PURE__*/_jsx(\"span\",{children:\"Topcon\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-item-inline\",htmlFor:\"brand-leica\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"brand-leica\",checked:formData.company.machine_control_brands.includes('Leica'),onChange:()=>handleMachineBrandChange('Leica')}),/*#__PURE__*/_jsx(\"span\",{children:\"Leica\"})]})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"How did you hear? \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group-inline radio-group-mobile-stack\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"social-media\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"social-media\",name:\"source\",value:\"social-media\",checked:formData.company.source_type==='social-media',onChange:e=>handleSourceChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Social Media\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"dealer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"dealer\",name:\"source\",value:\"dealer\",checked:formData.company.source_type==='dealer',onChange:e=>handleSourceChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Dealer\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"current-client\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"current-client\",name:\"source\",value:\"current-client\",checked:formData.company.source_type==='current-client',onChange:e=>handleSourceChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Current Client\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"email-marketing\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"email-marketing\",name:\"source\",value:\"email-marketing\",checked:formData.company.source_type==='email-marketing',onChange:e=>handleSourceChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Email/Text\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"search-engine\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"search-engine\",name:\"source\",value:\"search-engine\",checked:formData.company.source_type==='search-engine',onChange:e=>handleSourceChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Google\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"other-source\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"other-source\",name:\"source\",value:\"other\",checked:formData.company.source_type==='other',onChange:e=>handleSourceChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Other\"})]})]}),errors.source&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.source})]})]})}),showConditionalFields.platform&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Which Platform? \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item\",htmlFor:\"instagram\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"instagram\",name:\"platform\",value:\"Instagram\",checked:formData.company.platform==='Instagram',onChange:e=>handlePlatformChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Instagram\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item\",htmlFor:\"tiktok\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"tiktok\",name:\"platform\",value:\"TikTok\",checked:formData.company.platform==='TikTok',onChange:e=>handlePlatformChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"TikTok\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item\",htmlFor:\"facebook\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"facebook\",name:\"platform\",value:\"Facebook\",checked:formData.company.platform==='Facebook',onChange:e=>handlePlatformChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Facebook\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item\",htmlFor:\"youtube\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"youtube\",name:\"platform\",value:\"YouTube\",checked:formData.company.platform==='YouTube',onChange:e=>handlePlatformChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"YouTube\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item\",htmlFor:\"linkedin\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"linkedin\",name:\"platform\",value:\"LinkedIn\",checked:formData.company.platform==='LinkedIn',onChange:e=>handlePlatformChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"LinkedIn\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item\",htmlFor:\"other-platform\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"other-platform\",name:\"platform\",value:\"Other\",checked:formData.company.platform==='Other',onChange:e=>handlePlatformChange(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Other\"})]})]}),errors.platform&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.platform})]}),showConditionalFields.otherPlatform&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"other-platform-text\",children:[\"Please specify platform \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"other-platform-text\",placeholder:\"Type your answer\",value:formData.company.platform_other,onChange:e=>handleCompanyChange('platform_other',e.target.value),className:errors.platform_other?'error-highlight':''})]}),showConditionalFields.dealer&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"dealer-name\",children:[\"Name of dealer \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"dealer-name\",placeholder:\"Type your answer\",value:formData.company.dealer_name,onChange:e=>handleCompanyChange('dealer_name',e.target.value),className:errors.dealer_name?'error-highlight':''})]}),showConditionalFields.contractor&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"contractor-name\",children:[\"Name of contractor \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"contractor-name\",placeholder:\"Type your answer\",value:formData.company.contractor_name,onChange:e=>handleCompanyChange('contractor_name',e.target.value),className:errors.contractor_name?'error-highlight':''})]}),showConditionalFields.otherSource&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"other-source-text\",children:[\"Please specify \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"other-source-text\",placeholder:\"Type your answer\",value:formData.company.other_source_detail,onChange:e=>handleCompanyChange('other_source_detail',e.target.value),className:errors.other_source_detail?'error-highlight':''})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Next\"})})]});// Render contact form\nconst renderContactForm=()=>{const contactNumber=currentContactIndex+1;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleContactSubmit,className:\"form-step condensed-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-header\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"form-title\",children:[\"Contact Person \",contactNumber]})}),contactNumber>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"contact-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Previous Contacts:\"}),formData.contacts.slice(0,currentContactIndex).map((contact,index)=>/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"Contact \",index+1,\":\"]}),\" \",contact.name,\" - \",contact.position]},index))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"contact-name\",children:[\"Name \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"contact-name\",placeholder:\"Type your answer\",value:currentContact.name,onChange:e=>handleContactChange('name',e.target.value),className:errors.contact_name?'error-highlight':'',required:true}),errors.contact_name&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.contact_name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"contact-phone\",children:[\"Phone \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"contact-phone\",placeholder:\"+1 (___) ___-____\",value:currentContact.phone_number,onChange:e=>handleContactChange('phone_number',formatPhoneNumber(e.target.value)),className:errors.contact_phone?'error-highlight':'',maxLength:\"17\",required:true}),errors.contact_phone&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.contact_phone})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"contact-email\",children:[\"Email \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"contact-email\",placeholder:\"Type your answer\",value:currentContact.email,onChange:e=>handleContactChange('email',e.target.value),className:errors.contact_email?'error-highlight':'',required:true}),errors.contact_email&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.contact_email})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Position \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group-inline radio-group-mobile-stack\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"owner-president\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"owner-president\",name:\"position\",value:\"Owner/President\",checked:currentContact.position==='Owner/President',onChange:e=>handleContactChange('position',e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Owner/President\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"accounts-payable\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"accounts-payable\",name:\"position\",value:\"Accounts Payable\",checked:currentContact.position==='Accounts Payable',onChange:e=>handleContactChange('position',e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Accounts Payable\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"admin\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"admin\",name:\"position\",value:\"Admin\",checked:currentContact.position==='Admin',onChange:e=>handleContactChange('position',e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Admin\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"project-management\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"project-management\",name:\"position\",value:\"Project Management\",checked:currentContact.position==='Project Management',onChange:e=>handleContactChange('position',e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Project Mgmt\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"field-staff\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"field-staff\",name:\"position\",value:\"Field Staff\",checked:currentContact.position==='Field Staff',onChange:e=>handleContactChange('position',e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Field Staff\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"estimator\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"estimator\",name:\"position\",value:\"Estimator\",checked:currentContact.position==='Estimator',onChange:e=>handleContactChange('position',e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Estimator\"})]})]}),errors.position&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.position})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Receives Invoices? \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group-inline\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"receives-yes\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"receives-yes\",name:\"receives-invoices\",value:\"yes\",checked:currentContact.receives_invoices==='yes',onChange:e=>handleContactChange('receives_invoices',e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Yes\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"receives-no\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"receives-no\",name:\"receives-invoices\",value:\"no\",checked:currentContact.receives_invoices==='no',onChange:e=>handleContactChange('receives_invoices',e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"No\"})]})]}),errors.receives_invoices&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.receives_invoices})]})]}),contactNumber<5&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Another Contact? \",/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"radio-group-inline\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"another-yes\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"another-yes\",name:\"another-contact\",value:\"yes\",checked:currentContact.another_contact==='yes',onChange:e=>handleContactChange('another_contact',e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Yes\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"radio-item-inline\",htmlFor:\"another-no\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"another-no\",name:\"another-contact\",value:\"no\",checked:currentContact.another_contact==='no',onChange:e=>handleContactChange('another_contact',e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"No\"})]})]}),errors.another_contact&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.another_contact})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleBack,children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Next\"})]})]});};// Render review step\nconst renderReviewStep=()=>{const servicesArray=formData.company.services_used;const brandsArray=formData.company.machine_control_brands;return/*#__PURE__*/_jsxs(\"div\",{className:\"form-step\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"form-title\",children:\"Review & Submit\"}),submitMessage.text&&/*#__PURE__*/_jsx(\"div\",{className:\"submit-message \".concat(submitMessage.type),children:submitMessage.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Company Information\"}),/*#__PURE__*/_jsx(\"p\",{children:formData.company.company_name}),/*#__PURE__*/_jsxs(\"p\",{children:[formData.company.company_address,\", \",formData.company.city,\", \",formData.company.state,\" \",formData.company.zip_code]}),/*#__PURE__*/_jsx(\"p\",{children:formData.company.company_phone}),/*#__PURE__*/_jsx(\"p\",{children:formData.company.email_w9_coi}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Services:\"}),\" \",servicesArray.join(', ')]}),brandsArray.length>0&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Machine Control Brands:\"}),\" \",brandsArray.join(', ')]}),formData.company.source_type&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"How did you hear about us:\"}),\" \",formData.company.source_type==='social-media'?'Social Media':formData.company.source_type==='dealer'?'Dealer':formData.company.source_type==='current-client'?'Current Client':formData.company.source_type==='email-marketing'?'Email/Text':formData.company.source_type==='search-engine'?'Google':formData.company.source_type==='other'?'Other':formData.company.source_type]}),formData.company.platform&&formData.company.platform!=='Other'&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Platform:\"}),\" \",formData.company.platform]}),formData.company.platform_other&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Platform:\"}),\" \",formData.company.platform_other]}),formData.company.dealer_name&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Dealer Name:\"}),\" \",formData.company.dealer_name]}),formData.company.contractor_name&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Contractor Name:\"}),\" \",formData.company.contractor_name]}),formData.company.other_source_detail&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Source Details:\"}),\" \",formData.company.other_source_detail]})]}),formData.contacts.map((contact,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"contact-summary\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Contact \",index+1]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",contact.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",contact.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",contact.phone_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Position:\"}),\" \",contact.position]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Receives Invoices:\"}),\" \",contact.receives_invoices?'Yes':'No']})]},index)),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleBack,disabled:isSubmitting,children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleFinalSubmit,disabled:isSubmitting,children:isSubmitting?'Submitting...':'Submit All Information'})]})]});};// Show confirmation page if form was submitted successfully\nif(showConfirmation&&submissionResult){return/*#__PURE__*/_jsx(ConfirmationPage,{title:\"Client Information Received!\",message:\"Thank you for submitting your company information. We will review your information.\",referenceNumber:submissionResult.referenceNumber,submissionData:submissionResult.submittedData,showDetails:true,onNewSubmission:handleNewSubmission});}return/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[currentStep===0&&renderCompanyForm(),currentStep===1&&renderContactForm(),currentStep===2&&renderReviewStep()]});};export default ClientIntakeForm;","map":{"version":3,"names":["React","useState","supabase","ConfirmationPage","sanitizeInput","isValidEmail","isValidPhone","generateSecureId","validateFormData","formSubmissionLimiter","maskSensitiveData","jsx","_jsx","jsxs","_jsxs","ClientIntakeForm","currentStep","setCurrentStep","currentContactIndex","setCurrentContactIndex","isSubmitting","setIsSubmitting","submitMessage","setSubmitMessage","type","text","submissionResult","setSubmissionResult","showConfirmation","setShowConfirmation","formData","setFormData","company","company_name","company_address","city","state","zip_code","company_phone","email_w9_coi","services_used","machine_control_brands","source_type","platform","platform_other","dealer_name","contractor_name","other_source_detail","contacts","currentContact","setCurrentContact","name","phone_number","email","position","receives_invoices","another_contact","showConditionalFields","setShowConditionalFields","otherPlatform","dealer","contractor","otherSource","errors","setErrors","states","value","label","formatPhoneNumber","cleaned","replace","limited","substring","length","concat","handleCompanyChange","field","prev","_objectSpread","handleServiceChange","service","services","newServices","includes","filter","s","handleMachineBrandChange","brand","brands","newBrands","b","handleSourceChange","handlePlatformChange","handleContactChange","validateCompanyForm","newErrors","source","Object","keys","validateContactForm","contact_name","contact_phone","contact_email","contactNumber","handleCompanySubmit","e","preventDefault","handleContactSubmit","contactData","created_at","Date","toISOString","newContacts","handleBack","prevContact","handleFinalSubmit","rateLimitCheck","check","allowed","message","companySecurityCheck","isValid","contact","contactSecurityCheck","stripPhonePrefix","phone","intakeData","total_contacts","forEach","index","num","error","from","insert","select","single","referenceNumber","formatSourceType","sourceMap","submittedData","console","handleNewSubmission","resetForm","renderCompanyForm","onSubmit","className","children","htmlFor","id","placeholder","onChange","target","required","map","maxLength","checked","renderContactForm","slice","onClick","renderReviewStep","servicesArray","brandsArray","join","disabled","title","submissionData","showDetails","onNewSubmission"],"sources":["/Users/adambower/Dev/ab-civil-website-preview/src/shared/components/forms/ClientIntakeForm/ClientIntakeForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport './ClientIntakeForm.css';\nimport { supabase } from '../../../lib/supabase';\nimport ConfirmationPage from '../../ConfirmationPage/ConfirmationPage';\nimport { \n  sanitizeInput, \n  isValidEmail, \n  isValidPhone, \n  generateSecureId,\n  validateFormData,\n  formSubmissionLimiter,\n  maskSensitiveData \n} from '../../../utils/security';\n\nconst ClientIntakeForm = () => {\n  // State management\n  const [currentStep, setCurrentStep] = useState(0);\n  const [currentContactIndex, setCurrentContactIndex] = useState(0);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitMessage, setSubmitMessage] = useState({ type: '', text: '' });\n  const [submissionResult, setSubmissionResult] = useState(null);\n  const [showConfirmation, setShowConfirmation] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    company: {\n      company_name: '',\n      company_address: '',\n      city: '',\n      state: '',\n      zip_code: '',\n      company_phone: '',\n      email_w9_coi: '',\n      services_used: [],\n      machine_control_brands: [],\n      source_type: '',\n      platform: '',\n      platform_other: '',\n      dealer_name: '',\n      contractor_name: '',\n      other_source_detail: '',\n    },\n    contacts: []\n  });\n\n  const [currentContact, setCurrentContact] = useState({\n    name: '',\n    phone_number: '',\n    email: '',\n    position: '',\n    receives_invoices: false,\n    another_contact: ''\n  });\n\n  const [showConditionalFields, setShowConditionalFields] = useState({\n    platform: false,\n    otherPlatform: false,\n    dealer: false,\n    contractor: false,\n    otherSource: false\n  });\n\n  const [errors, setErrors] = useState({});\n\n  // US States list\n  const states = [\n    { value: '', label: 'State / Province' },\n    { value: 'AL', label: 'Alabama' },\n    { value: 'AK', label: 'Alaska' },\n    { value: 'AZ', label: 'Arizona' },\n    { value: 'AR', label: 'Arkansas' },\n    { value: 'CA', label: 'California' },\n    { value: 'CO', label: 'Colorado' },\n    { value: 'CT', label: 'Connecticut' },\n    { value: 'DE', label: 'Delaware' },\n    { value: 'FL', label: 'Florida' },\n    { value: 'GA', label: 'Georgia' },\n    { value: 'HI', label: 'Hawaii' },\n    { value: 'ID', label: 'Idaho' },\n    { value: 'IL', label: 'Illinois' },\n    { value: 'IN', label: 'Indiana' },\n    { value: 'IA', label: 'Iowa' },\n    { value: 'KS', label: 'Kansas' },\n    { value: 'KY', label: 'Kentucky' },\n    { value: 'LA', label: 'Louisiana' },\n    { value: 'ME', label: 'Maine' },\n    { value: 'MD', label: 'Maryland' },\n    { value: 'MA', label: 'Massachusetts' },\n    { value: 'MI', label: 'Michigan' },\n    { value: 'MN', label: 'Minnesota' },\n    { value: 'MS', label: 'Mississippi' },\n    { value: 'MO', label: 'Missouri' },\n    { value: 'MT', label: 'Montana' },\n    { value: 'NE', label: 'Nebraska' },\n    { value: 'NV', label: 'Nevada' },\n    { value: 'NH', label: 'New Hampshire' },\n    { value: 'NJ', label: 'New Jersey' },\n    { value: 'NM', label: 'New Mexico' },\n    { value: 'NY', label: 'New York' },\n    { value: 'NC', label: 'North Carolina' },\n    { value: 'ND', label: 'North Dakota' },\n    { value: 'OH', label: 'Ohio' },\n    { value: 'OK', label: 'Oklahoma' },\n    { value: 'OR', label: 'Oregon' },\n    { value: 'PA', label: 'Pennsylvania' },\n    { value: 'RI', label: 'Rhode Island' },\n    { value: 'SC', label: 'South Carolina' },\n    { value: 'SD', label: 'South Dakota' },\n    { value: 'TN', label: 'Tennessee' },\n    { value: 'TX', label: 'Texas' },\n    { value: 'UT', label: 'Utah' },\n    { value: 'VT', label: 'Vermont' },\n    { value: 'VA', label: 'Virginia' },\n    { value: 'WA', label: 'Washington' },\n    { value: 'WV', label: 'West Virginia' },\n    { value: 'WI', label: 'Wisconsin' },\n    { value: 'WY', label: 'Wyoming' },\n    { value: 'DC', label: 'District of Columbia' }\n  ];\n\n  // Phone number formatting with +1 prefix\n  const formatPhoneNumber = (value) => {\n    // Remove all non-digits and the +1 prefix if it exists\n    const cleaned = value.replace(/^\\+1\\s?/, '').replace(/\\D/g, '');\n    const limited = cleaned.substring(0, 10);\n    \n    if (limited.length === 0) return '';\n    if (limited.length <= 3) return `+1 (${limited}`;\n    if (limited.length <= 6) return `+1 (${limited.substring(0, 3)}) ${limited.substring(3)}`;\n    return `+1 (${limited.substring(0, 3)}) ${limited.substring(3, 6)}-${limited.substring(6)}`;\n  };\n\n  // Handle company field changes with sanitization\n  const handleCompanyChange = (field, value) => {\n    // Don't sanitize during input - only sanitize on submit\n    setFormData(prev => ({\n      ...prev,\n      company: {\n        ...prev.company,\n        [field]: value\n      }\n    }));\n  };\n\n  // Handle service checkbox changes\n  const handleServiceChange = (service) => {\n    setFormData(prev => {\n      const services = prev.company.services_used;\n      const newServices = services.includes(service)\n        ? services.filter(s => s !== service)\n        : [...services, service];\n      \n      return {\n        ...prev,\n        company: {\n          ...prev.company,\n          services_used: newServices\n        }\n      };\n    });\n  };\n\n  // Handle machine brand checkbox changes\n  const handleMachineBrandChange = (brand) => {\n    setFormData(prev => {\n      const brands = prev.company.machine_control_brands;\n      const newBrands = brands.includes(brand)\n        ? brands.filter(b => b !== brand)\n        : [...brands, brand];\n      \n      return {\n        ...prev,\n        company: {\n          ...prev.company,\n          machine_control_brands: newBrands\n        }\n      };\n    });\n  };\n\n  // Handle source selection\n  const handleSourceChange = (value) => {\n    handleCompanyChange('source_type', value);\n    \n    // Reset conditional fields\n    setShowConditionalFields({\n      platform: value === 'social-media',\n      dealer: value === 'dealer',\n      contractor: value === 'current-client',\n      otherSource: value === 'other',\n      otherPlatform: false\n    });\n    \n    // Clear conditional field values\n    if (value !== 'social-media') {\n      handleCompanyChange('platform', '');\n      handleCompanyChange('platform_other', '');\n    }\n    if (value !== 'dealer') {\n      handleCompanyChange('dealer_name', '');\n    }\n    if (value !== 'current-client') {\n      handleCompanyChange('contractor_name', '');\n    }\n    if (value !== 'other') {\n      handleCompanyChange('other_source_detail', '');\n    }\n  };\n\n  // Handle platform selection\n  const handlePlatformChange = (value) => {\n    handleCompanyChange('platform', value);\n    setShowConditionalFields(prev => ({\n      ...prev,\n      otherPlatform: value === 'Other'\n    }));\n    \n    if (value !== 'Other') {\n      handleCompanyChange('platform_other', '');\n    }\n  };\n\n  // Handle contact field changes with sanitization\n  const handleContactChange = (field, value) => {\n    // Don't sanitize during input - only sanitize on submit\n    setCurrentContact(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  // Validate company form\n  const validateCompanyForm = () => {\n    const newErrors = {};\n    const { company } = formData;\n    \n    if (!company.company_name) {\n      newErrors.company_name = 'Company name is required';\n    } else if (company.company_name.length < 2 || company.company_name.length > 200) {\n      newErrors.company_name = 'Company name must be between 2 and 200 characters';\n    }\n    \n    if (!company.company_address) {\n      newErrors.company_address = 'Company address is required';\n    } else if (company.company_address.length < 5 || company.company_address.length > 500) {\n      newErrors.company_address = 'Address must be between 5 and 500 characters';\n    }\n    \n    if (!company.company_phone) {\n      newErrors.company_phone = 'Company phone is required';\n    } else if (!isValidPhone(company.company_phone)) {\n      newErrors.company_phone = 'Please enter a valid 10-digit phone number';\n    }\n    \n    if (!company.email_w9_coi) {\n      newErrors.email_w9_coi = 'Email is required';\n    } else if (!isValidEmail(company.email_w9_coi)) {\n      newErrors.email_w9_coi = 'Please enter a valid email address';\n    }\n    if (company.services_used.length === 0) newErrors.services = 'Please select at least one service';\n    if (!company.source_type) newErrors.source = 'Please select how you found out about us';\n    \n    // Validate conditional fields\n    if (company.source_type === 'social-media' && !company.platform) {\n      newErrors.platform = 'Please select a platform';\n    }\n    if (company.platform === 'Other' && !company.platform_other) {\n      newErrors.platform_other = 'Please specify the platform';\n    }\n    if (company.source_type === 'dealer' && !company.dealer_name) {\n      newErrors.dealer_name = 'Please enter the dealer name';\n    }\n    if (company.source_type === 'current-client' && !company.contractor_name) {\n      newErrors.contractor_name = 'Please enter the contractor name';\n    }\n    if (company.source_type === 'other' && !company.other_source_detail) {\n      newErrors.other_source_detail = 'Please specify how you found out about us';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Validate contact form\n  const validateContactForm = () => {\n    const newErrors = {};\n    \n    if (!currentContact.name) {\n      newErrors.contact_name = 'Name is required';\n    } else if (currentContact.name.length < 2 || currentContact.name.length > 100) {\n      newErrors.contact_name = 'Name must be between 2 and 100 characters';\n    }\n    \n    if (!currentContact.phone_number) {\n      newErrors.contact_phone = 'Phone number is required';\n    } else if (!isValidPhone(currentContact.phone_number)) {\n      newErrors.contact_phone = 'Please enter a valid 10-digit phone number';\n    }\n    \n    if (!currentContact.email) {\n      newErrors.contact_email = 'Email is required';\n    } else if (!isValidEmail(currentContact.email)) {\n      newErrors.contact_email = 'Please enter a valid email address';\n    }\n    if (!currentContact.position) newErrors.position = 'Please select a position';\n    if (currentContact.receives_invoices === '') newErrors.receives_invoices = 'Please specify if this contact receives invoices';\n    \n    const contactNumber = currentContactIndex + 1;\n    if (contactNumber < 5 && !currentContact.another_contact) {\n      newErrors.another_contact = 'Please specify if you need to submit another contact';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Handle company form submission\n  const handleCompanySubmit = (e) => {\n    e.preventDefault();\n    if (validateCompanyForm()) {\n      setCurrentStep(1);\n      setErrors({});\n    }\n  };\n\n  // Handle contact form submission\n  const handleContactSubmit = (e) => {\n    e.preventDefault();\n    if (validateContactForm()) {\n      // Save current contact\n      const contactData = {\n        name: currentContact.name,\n        phone_number: currentContact.phone_number,\n        email: currentContact.email,\n        position: currentContact.position,\n        receives_invoices: currentContact.receives_invoices === 'yes',\n        created_at: new Date().toISOString()\n      };\n      \n      const newContacts = [...formData.contacts];\n      newContacts[currentContactIndex] = contactData;\n      setFormData(prev => ({\n        ...prev,\n        contacts: newContacts\n      }));\n      \n      // Check if adding another contact\n      if (currentContact.another_contact === 'yes' && formData.contacts.length < 5) {\n        setCurrentContactIndex(prev => prev + 1);\n        setCurrentContact({\n          name: '',\n          phone_number: '',\n          email: '',\n          position: '',\n          receives_invoices: '',\n          another_contact: ''\n        });\n        setErrors({});\n      } else {\n        // Go to review step\n        setCurrentStep(2);\n        setErrors({});\n      }\n    }\n  };\n\n  // Handle back navigation\n  const handleBack = () => {\n    if (currentStep === 1 && currentContactIndex > 0) {\n      // Go to previous contact\n      setCurrentContactIndex(prev => prev - 1);\n      const prevContact = formData.contacts[currentContactIndex - 1];\n      if (prevContact) {\n        setCurrentContact({\n          name: prevContact.name,\n          phone_number: prevContact.phone_number,\n          email: prevContact.email,\n          position: prevContact.position,\n          receives_invoices: prevContact.receives_invoices ? 'yes' : 'no',\n          another_contact: currentContactIndex < formData.contacts.length - 1 ? 'yes' : 'no'\n        });\n      }\n    } else if (currentStep > 0) {\n      setCurrentStep(prev => prev - 1);\n      setErrors({});\n    }\n  };\n\n  // Handle final submission to Supabase with security checks\n  const handleFinalSubmit = async () => {\n    // Check rate limiting\n    const rateLimitCheck = formSubmissionLimiter.check(\n      formData.company.email_w9_coi || 'anonymous'\n    );\n    if (!rateLimitCheck.allowed) {\n      setSubmitMessage({ \n        type: 'error', \n        text: rateLimitCheck.message \n      });\n      return;\n    }\n    \n    // Additional security validation\n    const companySecurityCheck = validateFormData(formData.company);\n    if (!companySecurityCheck.isValid) {\n      setSubmitMessage({ \n        type: 'error', \n        text: 'Invalid input detected in company information. Please check your entries.' \n      });\n      return;\n    }\n    \n    // Validate each contact\n    for (const contact of formData.contacts) {\n      const contactSecurityCheck = validateFormData(contact);\n      if (!contactSecurityCheck.isValid) {\n        setSubmitMessage({ \n          type: 'error', \n          text: 'Invalid input detected in contact information. Please check your entries.' \n        });\n        return;\n      }\n    }\n    \n    setIsSubmitting(true);\n    setSubmitMessage({ type: '', text: '' });\n    \n    try {\n      // Helper to strip +1 from phone numbers for database storage\n      const stripPhonePrefix = (phone) => {\n        if (!phone) return phone;\n        return phone.replace(/^\\+1\\s?/, '');\n      };\n\n      // Prepare data for client_intake table\n      const intakeData = {\n        // Company fields\n        company_name: sanitizeInput(formData.company.company_name),\n        company_address: sanitizeInput(formData.company.company_address),\n        city: sanitizeInput(formData.company.city),\n        state: formData.company.state,\n        zip_code: formData.company.zip_code,\n        company_phone: stripPhonePrefix(formData.company.company_phone),\n        email_w9_coi: sanitizeInput(formData.company.email_w9_coi),\n        \n        // Source fields - remove enum values by not including them\n        source_type: formData.company.source_type,\n        platform_other: sanitizeInput(formData.company.platform_other) || null,\n        dealer_name: sanitizeInput(formData.company.dealer_name) || null,\n        contractor_name: sanitizeInput(formData.company.contractor_name) || null,\n        other_source_detail: sanitizeInput(formData.company.other_source_detail) || null,\n        \n        // Services and brands as arrays\n        services_used: formData.company.services_used.length > 0 \n          ? formData.company.services_used \n          : null,\n        machine_control_brands: formData.company.machine_control_brands.length > 0 \n          ? formData.company.machine_control_brands \n          : null,\n        \n        // Total contacts\n        total_contacts: formData.contacts.length,\n        created_at: new Date().toISOString()\n      };\n\n      // Add contact fields (up to 5 contacts)\n      formData.contacts.forEach((contact, index) => {\n        const num = index + 1;\n        intakeData[`contact_${num}_name`] = sanitizeInput(contact.name);\n        intakeData[`contact_${num}_phone`] = stripPhonePrefix(contact.phone_number);\n        intakeData[`contact_${num}_email`] = sanitizeInput(contact.email);\n        intakeData[`contact_${num}_position`] = contact.position || null;\n        intakeData[`contact_${num}_receives_invoices`] = contact.receives_invoices === true || contact.receives_invoices === 'yes';\n      });\n\n      // Insert into client_intake table\n      const { error } = await supabase\n        .from('client_intake')\n        .insert([intakeData])\n        .select()\n        .single();\n\n      if (error) {\n        throw error;\n      }\n\n      // Success! Store submission data and show confirmation page\n      // Use secure random ID instead of timestamp\n      const referenceNumber = `CI-${generateSecureId(8)}`;\n      \n      // Format source_type for display\n      const formatSourceType = (type) => {\n        const sourceMap = {\n          'social-media': 'Social Media',\n          'dealer': 'Dealer',\n          'current-client': 'Current Client',\n          'email-marketing': 'Email/Text',\n          'search-engine': 'Google',\n          'other': 'Other'\n        };\n        return sourceMap[type] || type;\n      };\n      \n      setSubmissionResult({\n        referenceNumber,\n        submittedData: {\n          company: {\n            ...formData.company,\n            source_type: formatSourceType(formData.company.source_type)\n          },\n          contacts: formData.contacts\n        }\n      });\n      \n      setShowConfirmation(true);\n      \n    } catch (error) {\n      // Log error with masked sensitive data\n      console.error('Submission error:', maskSensitiveData(error));\n      setSubmitMessage({ \n        type: 'error', \n        text: 'There was an error submitting your information. Please try again or contact us directly.' \n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Handle new submission from confirmation page\n  const handleNewSubmission = () => {\n    resetForm();\n    setSubmissionResult(null);\n    setShowConfirmation(false);\n  };\n\n  // Reset form to initial state\n  const resetForm = () => {\n    setCurrentStep(0);\n    setCurrentContactIndex(0);\n    setFormData({\n      company: {\n        company_name: '',\n        company_address: '',\n        city: '',\n        state: '',\n        zip_code: '',\n        company_phone: '',\n        email_w9_coi: '',\n        services_used: [],\n        machine_control_brands: [],\n        source_type: '',\n        platform: '',\n        platform_other: '',\n        dealer_name: '',\n        contractor_name: '',\n        other_source_detail: '',\n      },\n      contacts: []\n    });\n    setCurrentContact({\n      name: '',\n      phone_number: '',\n      email: '',\n      position: '',\n      receives_invoices: '',\n      another_contact: ''\n    });\n    setShowConditionalFields({\n      platform: false,\n      otherPlatform: false,\n      dealer: false,\n      contractor: false,\n      otherSource: false\n    });\n    setErrors({});\n    setSubmitMessage({ type: '', text: '' });\n  };\n\n  // Render company form\n  const renderCompanyForm = () => (\n    <form onSubmit={handleCompanySubmit} className=\"form-step condensed-form\">\n      <div className=\"form-header\">\n        <h2 className=\"form-title\">Business Information</h2>\n      </div>\n      \n      {/* Company Details Section */}\n      <div className=\"form-section\">\n        <div className=\"form-row\">\n          <label htmlFor=\"company-name\">\n            Company Name <span className=\"required\">*</span>\n          </label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"text\"\n              id=\"company-name\"\n              placeholder=\"Type your answer\"\n              value={formData.company.company_name}\n              onChange={(e) => handleCompanyChange('company_name', e.target.value)}\n              className={errors.company_name ? 'error-highlight' : ''}\n              required\n            />\n            {errors.company_name && <span className=\"error-message\">{errors.company_name}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label htmlFor=\"company-address\">\n            Company Address <span className=\"required\">*</span>\n          </label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"text\"\n              id=\"company-address\"\n              placeholder=\"Street Address\"\n              value={formData.company.company_address}\n              onChange={(e) => handleCompanyChange('company_address', e.target.value)}\n              className={errors.company_address ? 'error-highlight' : ''}\n              required\n            />\n            <div className=\"address-row\">\n              <input\n                type=\"text\"\n                placeholder=\"City\"\n                value={formData.company.city}\n                onChange={(e) => handleCompanyChange('city', e.target.value)}\n              />\n              <select\n                value={formData.company.state}\n                onChange={(e) => handleCompanyChange('state', e.target.value)}\n              >\n                {states.map(state => (\n                  <option key={state.value} value={state.value}>{state.label}</option>\n                ))}\n              </select>\n              <input\n                type=\"text\"\n                placeholder=\"ZIP\"\n                value={formData.company.zip_code}\n                onChange={(e) => {\n                  const value = e.target.value.replace(/\\D/g, '').substring(0, 5);\n                  handleCompanyChange('zip_code', value);\n                }}\n                maxLength=\"5\"\n              />\n            </div>\n            {errors.company_address && <span className=\"error-message\">{errors.company_address}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label htmlFor=\"company-phone\">\n            Company Phone <span className=\"required\">*</span>\n          </label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"tel\"\n              id=\"company-phone\"\n              placeholder=\"+1 (___) ___-____\"\n              value={formData.company.company_phone}\n              onChange={(e) => handleCompanyChange('company_phone', formatPhoneNumber(e.target.value))}\n              className={errors.company_phone ? 'error-highlight' : ''}\n              maxLength=\"17\"\n              required\n            />\n            {errors.company_phone && <span className=\"error-message\">{errors.company_phone}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label htmlFor=\"email-w9\">\n            Email for W9/COI <span className=\"required\">*</span>\n          </label>\n          <div className=\"input-wrapper\">\n            <input\n              type=\"email\"\n              id=\"email-w9\"\n              placeholder=\"email@company.com\"\n              value={formData.company.email_w9_coi}\n              onChange={(e) => handleCompanyChange('email_w9_coi', e.target.value)}\n              className={errors.email_w9_coi ? 'error-highlight' : ''}\n              required\n            />\n            {errors.email_w9_coi && <span className=\"error-message\">{errors.email_w9_coi}</span>}\n          </div>\n        </div>\n      </div>\n\n      {/* Services Section */}\n      <div className=\"form-section\">\n        <div className=\"form-row\">\n          <label>\n            Services Needed <span className=\"required\">*</span>\n          </label>\n          <div className=\"input-wrapper\">\n            <div className=\"checkbox-group-inline\">\n              <label className=\"checkbox-item-inline\" htmlFor=\"service-3d-model\">\n                <input\n                  type=\"checkbox\"\n                  id=\"service-3d-model\"\n                  checked={formData.company.services_used.includes('3D Models')}\n                  onChange={() => handleServiceChange('3D Models')}\n                />\n                <span>3D Models</span>\n              </label>\n              <label className=\"checkbox-item-inline\" htmlFor=\"service-takeoff\">\n                <input\n                  type=\"checkbox\"\n                  id=\"service-takeoff\"\n                  checked={formData.company.services_used.includes('Takeoffs')}\n                  onChange={() => handleServiceChange('Takeoffs')}\n                />\n                <span>Takeoffs</span>\n              </label>\n            </div>\n            {errors.services && <span className=\"error-message\">{errors.services}</span>}\n          </div>\n        </div>\n\n        <div className=\"form-row\">\n          <label>Machine Control</label>\n          <div className=\"input-wrapper\">\n            <div className=\"checkbox-group-inline\">\n              <label className=\"checkbox-item-inline\" htmlFor=\"brand-trimble\">\n                <input\n                  type=\"checkbox\"\n                  id=\"brand-trimble\"\n                  checked={formData.company.machine_control_brands.includes('Trimble')}\n                  onChange={() => handleMachineBrandChange('Trimble')}\n                />\n                <span>Trimble</span>\n              </label>\n              <label className=\"checkbox-item-inline\" htmlFor=\"brand-topcon\">\n                <input\n                  type=\"checkbox\"\n                  id=\"brand-topcon\"\n                  checked={formData.company.machine_control_brands.includes('Topcon')}\n                  onChange={() => handleMachineBrandChange('Topcon')}\n                />\n                <span>Topcon</span>\n              </label>\n              <label className=\"checkbox-item-inline\" htmlFor=\"brand-leica\">\n                <input\n                  type=\"checkbox\"\n                  id=\"brand-leica\"\n                  checked={formData.company.machine_control_brands.includes('Leica')}\n                  onChange={() => handleMachineBrandChange('Leica')}\n                />\n                <span>Leica</span>\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Source Section */}\n      <div className=\"form-section\">\n        <div className=\"form-row\">\n          <label>\n            How did you hear? <span className=\"required\">*</span>\n          </label>\n          <div className=\"input-wrapper\">\n            <div className=\"radio-group-inline radio-group-mobile-stack\">\n              <label className=\"radio-item-inline\" htmlFor=\"social-media\">\n                <input\n                  type=\"radio\"\n                  id=\"social-media\"\n                  name=\"source\"\n                  value=\"social-media\"\n                  checked={formData.company.source_type === 'social-media'}\n                  onChange={(e) => handleSourceChange(e.target.value)}\n                />\n                <span>Social Media</span>\n              </label>\n              <label className=\"radio-item-inline\" htmlFor=\"dealer\">\n                <input\n                  type=\"radio\"\n                  id=\"dealer\"\n                  name=\"source\"\n                  value=\"dealer\"\n                  checked={formData.company.source_type === 'dealer'}\n                  onChange={(e) => handleSourceChange(e.target.value)}\n                />\n                <span>Dealer</span>\n              </label>\n              <label className=\"radio-item-inline\" htmlFor=\"current-client\">\n                <input\n                  type=\"radio\"\n                  id=\"current-client\"\n                  name=\"source\"\n                  value=\"current-client\"\n                  checked={formData.company.source_type === 'current-client'}\n                  onChange={(e) => handleSourceChange(e.target.value)}\n                />\n                <span>Current Client</span>\n              </label>\n              <label className=\"radio-item-inline\" htmlFor=\"email-marketing\">\n                <input\n                  type=\"radio\"\n                  id=\"email-marketing\"\n                  name=\"source\"\n                  value=\"email-marketing\"\n                  checked={formData.company.source_type === 'email-marketing'}\n                  onChange={(e) => handleSourceChange(e.target.value)}\n                />\n                <span>Email/Text</span>\n              </label>\n              <label className=\"radio-item-inline\" htmlFor=\"search-engine\">\n                <input\n                  type=\"radio\"\n                  id=\"search-engine\"\n                  name=\"source\"\n                  value=\"search-engine\"\n                  checked={formData.company.source_type === 'search-engine'}\n                  onChange={(e) => handleSourceChange(e.target.value)}\n                />\n                <span>Google</span>\n              </label>\n              <label className=\"radio-item-inline\" htmlFor=\"other-source\">\n                <input\n                  type=\"radio\"\n                  id=\"other-source\"\n                  name=\"source\"\n                  value=\"other\"\n                  checked={formData.company.source_type === 'other'}\n                  onChange={(e) => handleSourceChange(e.target.value)}\n                />\n                <span>Other</span>\n              </label>\n            </div>\n            {errors.source && <span className=\"error-message\">{errors.source}</span>}\n          </div>\n        </div>\n      </div>\n\n      {/* Conditional fields */}\n      {showConditionalFields.platform && (\n        <div className=\"form-group\">\n          <label>\n            Which Platform? <span className=\"required\">*</span>\n          </label>\n          <div className=\"radio-group\">\n            <label className=\"radio-item\" htmlFor=\"instagram\">\n              <input\n                type=\"radio\"\n                id=\"instagram\"\n                name=\"platform\"\n                value=\"Instagram\"\n                checked={formData.company.platform === 'Instagram'}\n                onChange={(e) => handlePlatformChange(e.target.value)}\n              />\n              <span>Instagram</span>\n            </label>\n            <label className=\"radio-item\" htmlFor=\"tiktok\">\n              <input\n                type=\"radio\"\n                id=\"tiktok\"\n                name=\"platform\"\n                value=\"TikTok\"\n                checked={formData.company.platform === 'TikTok'}\n                onChange={(e) => handlePlatformChange(e.target.value)}\n              />\n              <span>TikTok</span>\n            </label>\n            <label className=\"radio-item\" htmlFor=\"facebook\">\n              <input\n                type=\"radio\"\n                id=\"facebook\"\n                name=\"platform\"\n                value=\"Facebook\"\n                checked={formData.company.platform === 'Facebook'}\n                onChange={(e) => handlePlatformChange(e.target.value)}\n              />\n              <span>Facebook</span>\n            </label>\n            <label className=\"radio-item\" htmlFor=\"youtube\">\n              <input\n                type=\"radio\"\n                id=\"youtube\"\n                name=\"platform\"\n                value=\"YouTube\"\n                checked={formData.company.platform === 'YouTube'}\n                onChange={(e) => handlePlatformChange(e.target.value)}\n              />\n              <span>YouTube</span>\n            </label>\n            <label className=\"radio-item\" htmlFor=\"linkedin\">\n              <input\n                type=\"radio\"\n                id=\"linkedin\"\n                name=\"platform\"\n                value=\"LinkedIn\"\n                checked={formData.company.platform === 'LinkedIn'}\n                onChange={(e) => handlePlatformChange(e.target.value)}\n              />\n              <span>LinkedIn</span>\n            </label>\n            <label className=\"radio-item\" htmlFor=\"other-platform\">\n              <input\n                type=\"radio\"\n                id=\"other-platform\"\n                name=\"platform\"\n                value=\"Other\"\n                checked={formData.company.platform === 'Other'}\n                onChange={(e) => handlePlatformChange(e.target.value)}\n              />\n              <span>Other</span>\n            </label>\n          </div>\n          {errors.platform && (\n            <span className=\"error-message\">{errors.platform}</span>\n          )}\n        </div>\n      )}\n\n      {showConditionalFields.otherPlatform && (\n        <div className=\"form-group\">\n          <label htmlFor=\"other-platform-text\">\n            Please specify platform <span className=\"required\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"other-platform-text\"\n            placeholder=\"Type your answer\"\n            value={formData.company.platform_other}\n            onChange={(e) => handleCompanyChange('platform_other', e.target.value)}\n            className={errors.platform_other ? 'error-highlight' : ''}\n          />\n        </div>\n      )}\n\n      {showConditionalFields.dealer && (\n        <div className=\"form-group\">\n          <label htmlFor=\"dealer-name\">\n            Name of dealer <span className=\"required\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"dealer-name\"\n            placeholder=\"Type your answer\"\n            value={formData.company.dealer_name}\n            onChange={(e) => handleCompanyChange('dealer_name', e.target.value)}\n            className={errors.dealer_name ? 'error-highlight' : ''}\n          />\n        </div>\n      )}\n\n      {showConditionalFields.contractor && (\n        <div className=\"form-group\">\n          <label htmlFor=\"contractor-name\">\n            Name of contractor <span className=\"required\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"contractor-name\"\n            placeholder=\"Type your answer\"\n            value={formData.company.contractor_name}\n            onChange={(e) => handleCompanyChange('contractor_name', e.target.value)}\n            className={errors.contractor_name ? 'error-highlight' : ''}\n          />\n        </div>\n      )}\n\n      {showConditionalFields.otherSource && (\n        <div className=\"form-group\">\n          <label htmlFor=\"other-source-text\">\n            Please specify <span className=\"required\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"other-source-text\"\n            placeholder=\"Type your answer\"\n            value={formData.company.other_source_detail}\n            onChange={(e) => handleCompanyChange('other_source_detail', e.target.value)}\n            className={errors.other_source_detail ? 'error-highlight' : ''}\n          />\n        </div>\n      )}\n\n      <div className=\"button-group\">\n        <button type=\"submit\" className=\"btn btn-primary\">\n          Next\n        </button>\n      </div>\n    </form>\n  );\n\n  // Render contact form\n  const renderContactForm = () => {\n    const contactNumber = currentContactIndex + 1;\n    \n    return (\n      <form onSubmit={handleContactSubmit} className=\"form-step condensed-form\">\n        <div className=\"form-header\">\n          <h2 className=\"form-title\">Contact Person {contactNumber}</h2>\n        </div>\n        \n        {/* Contact summary for contacts 2+ */}\n        {contactNumber > 1 && (\n          <div className=\"contact-summary\">\n            <h4>Previous Contacts:</h4>\n            {formData.contacts.slice(0, currentContactIndex).map((contact, index) => (\n              <p key={index}>\n                <strong>Contact {index + 1}:</strong> {contact.name} - {contact.position}\n              </p>\n            ))}\n          </div>\n        )}\n\n        {/* Contact Details Section */}\n        <div className=\"form-section\">\n          <div className=\"form-row\">\n            <label htmlFor=\"contact-name\">\n              Name <span className=\"required\">*</span>\n            </label>\n            <div className=\"input-wrapper\">\n              <input\n                type=\"text\"\n                id=\"contact-name\"\n                placeholder=\"Type your answer\"\n                value={currentContact.name}\n                onChange={(e) => handleContactChange('name', e.target.value)}\n                className={errors.contact_name ? 'error-highlight' : ''}\n                required\n              />\n              {errors.contact_name && <span className=\"error-message\">{errors.contact_name}</span>}\n            </div>\n          </div>\n\n          <div className=\"form-row\">\n            <label htmlFor=\"contact-phone\">\n              Phone <span className=\"required\">*</span>\n            </label>\n            <div className=\"input-wrapper\">\n              <input\n                type=\"tel\"\n                id=\"contact-phone\"\n                placeholder=\"+1 (___) ___-____\"\n                value={currentContact.phone_number}\n                onChange={(e) => handleContactChange('phone_number', formatPhoneNumber(e.target.value))}\n                className={errors.contact_phone ? 'error-highlight' : ''}\n                maxLength=\"17\"\n                required\n              />\n              {errors.contact_phone && <span className=\"error-message\">{errors.contact_phone}</span>}\n            </div>\n          </div>\n\n          <div className=\"form-row\">\n            <label htmlFor=\"contact-email\">\n              Email <span className=\"required\">*</span>\n            </label>\n            <div className=\"input-wrapper\">\n              <input\n                type=\"email\"\n                id=\"contact-email\"\n                placeholder=\"Type your answer\"\n                value={currentContact.email}\n                onChange={(e) => handleContactChange('email', e.target.value)}\n                className={errors.contact_email ? 'error-highlight' : ''}\n                required\n              />\n              {errors.contact_email && <span className=\"error-message\">{errors.contact_email}</span>}\n            </div>\n          </div>\n        </div>\n\n        {/* Position Section */}\n        <div className=\"form-section\">\n          <div className=\"form-row\">\n            <label>\n              Position <span className=\"required\">*</span>\n            </label>\n            <div className=\"input-wrapper\">\n              <div className=\"radio-group-inline radio-group-mobile-stack\">\n                <label className=\"radio-item-inline\" htmlFor=\"owner-president\">\n                  <input\n                    type=\"radio\"\n                    id=\"owner-president\"\n                    name=\"position\"\n                    value=\"Owner/President\"\n                    checked={currentContact.position === 'Owner/President'}\n                    onChange={(e) => handleContactChange('position', e.target.value)}\n                  />\n                  <span>Owner/President</span>\n                </label>\n                <label className=\"radio-item-inline\" htmlFor=\"accounts-payable\">\n                  <input\n                    type=\"radio\"\n                    id=\"accounts-payable\"\n                    name=\"position\"\n                    value=\"Accounts Payable\"\n                    checked={currentContact.position === 'Accounts Payable'}\n                    onChange={(e) => handleContactChange('position', e.target.value)}\n                  />\n                  <span>Accounts Payable</span>\n                </label>\n                <label className=\"radio-item-inline\" htmlFor=\"admin\">\n                  <input\n                    type=\"radio\"\n                    id=\"admin\"\n                    name=\"position\"\n                    value=\"Admin\"\n                    checked={currentContact.position === 'Admin'}\n                    onChange={(e) => handleContactChange('position', e.target.value)}\n                  />\n                  <span>Admin</span>\n                </label>\n                <label className=\"radio-item-inline\" htmlFor=\"project-management\">\n                  <input\n                    type=\"radio\"\n                    id=\"project-management\"\n                    name=\"position\"\n                    value=\"Project Management\"\n                    checked={currentContact.position === 'Project Management'}\n                    onChange={(e) => handleContactChange('position', e.target.value)}\n                  />\n                  <span>Project Mgmt</span>\n                </label>\n                <label className=\"radio-item-inline\" htmlFor=\"field-staff\">\n                  <input\n                    type=\"radio\"\n                    id=\"field-staff\"\n                    name=\"position\"\n                    value=\"Field Staff\"\n                    checked={currentContact.position === 'Field Staff'}\n                    onChange={(e) => handleContactChange('position', e.target.value)}\n                  />\n                  <span>Field Staff</span>\n                </label>\n                <label className=\"radio-item-inline\" htmlFor=\"estimator\">\n                  <input\n                    type=\"radio\"\n                    id=\"estimator\"\n                    name=\"position\"\n                    value=\"Estimator\"\n                    checked={currentContact.position === 'Estimator'}\n                    onChange={(e) => handleContactChange('position', e.target.value)}\n                  />\n                  <span>Estimator</span>\n                </label>\n              </div>\n              {errors.position && <span className=\"error-message\">{errors.position}</span>}\n            </div>\n          </div>\n        </div>\n\n        {/* Additional Contact Details Section */}\n        <div className=\"form-section\">\n          <div className=\"form-row\">\n            <label>\n              Receives Invoices? <span className=\"required\">*</span>\n            </label>\n            <div className=\"input-wrapper\">\n              <div className=\"radio-group-inline\">\n                <label className=\"radio-item-inline\" htmlFor=\"receives-yes\">\n                  <input\n                    type=\"radio\"\n                    id=\"receives-yes\"\n                    name=\"receives-invoices\"\n                    value=\"yes\"\n                    checked={currentContact.receives_invoices === 'yes'}\n                    onChange={(e) => handleContactChange('receives_invoices', e.target.value)}\n                  />\n                  <span>Yes</span>\n                </label>\n                <label className=\"radio-item-inline\" htmlFor=\"receives-no\">\n                  <input\n                    type=\"radio\"\n                    id=\"receives-no\"\n                    name=\"receives-invoices\"\n                    value=\"no\"\n                    checked={currentContact.receives_invoices === 'no'}\n                    onChange={(e) => handleContactChange('receives_invoices', e.target.value)}\n                  />\n                  <span>No</span>\n                </label>\n              </div>\n              {errors.receives_invoices && <span className=\"error-message\">{errors.receives_invoices}</span>}\n            </div>\n          </div>\n\n          {contactNumber < 5 && (\n            <div className=\"form-row\">\n              <label>\n                Another Contact? <span className=\"required\">*</span>\n              </label>\n              <div className=\"input-wrapper\">\n                <div className=\"radio-group-inline\">\n                  <label className=\"radio-item-inline\" htmlFor=\"another-yes\">\n                    <input\n                      type=\"radio\"\n                      id=\"another-yes\"\n                      name=\"another-contact\"\n                      value=\"yes\"\n                      checked={currentContact.another_contact === 'yes'}\n                      onChange={(e) => handleContactChange('another_contact', e.target.value)}\n                    />\n                    <span>Yes</span>\n                  </label>\n                  <label className=\"radio-item-inline\" htmlFor=\"another-no\">\n                    <input\n                      type=\"radio\"\n                      id=\"another-no\"\n                      name=\"another-contact\"\n                      value=\"no\"\n                      checked={currentContact.another_contact === 'no'}\n                      onChange={(e) => handleContactChange('another_contact', e.target.value)}\n                    />\n                    <span>No</span>\n                  </label>\n                </div>\n                {errors.another_contact && <span className=\"error-message\">{errors.another_contact}</span>}\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"button-group\">\n          <button type=\"button\" className=\"btn btn-secondary\" onClick={handleBack}>\n            Back\n          </button>\n          <button type=\"submit\" className=\"btn btn-primary\">\n            Next\n          </button>\n        </div>\n      </form>\n    );\n  };\n\n  // Render review step\n  const renderReviewStep = () => {\n    const servicesArray = formData.company.services_used;\n    const brandsArray = formData.company.machine_control_brands;\n    \n    return (\n      <div className=\"form-step\">\n        <h2 className=\"form-title\">Review & Submit</h2>\n        \n        {submitMessage.text && (\n          <div className={`submit-message ${submitMessage.type}`}>\n            {submitMessage.text}\n          </div>\n        )}\n        \n        <div className=\"contact-summary\">\n          <h4>Company Information</h4>\n          <p>{formData.company.company_name}</p>\n          <p>{formData.company.company_address}, {formData.company.city}, {formData.company.state} {formData.company.zip_code}</p>\n          <p>{formData.company.company_phone}</p>\n          <p>{formData.company.email_w9_coi}</p>\n          <p><strong>Services:</strong> {servicesArray.join(', ')}</p>\n          {brandsArray.length > 0 && (\n            <p><strong>Machine Control Brands:</strong> {brandsArray.join(', ')}</p>\n          )}\n          {formData.company.source_type && (\n            <p><strong>How did you hear about us:</strong> {\n              formData.company.source_type === 'social-media' ? 'Social Media' :\n              formData.company.source_type === 'dealer' ? 'Dealer' :\n              formData.company.source_type === 'current-client' ? 'Current Client' :\n              formData.company.source_type === 'email-marketing' ? 'Email/Text' :\n              formData.company.source_type === 'search-engine' ? 'Google' :\n              formData.company.source_type === 'other' ? 'Other' :\n              formData.company.source_type\n            }</p>\n          )}\n          {formData.company.platform && formData.company.platform !== 'Other' && (\n            <p><strong>Platform:</strong> {formData.company.platform}</p>\n          )}\n          {formData.company.platform_other && (\n            <p><strong>Platform:</strong> {formData.company.platform_other}</p>\n          )}\n          {formData.company.dealer_name && (\n            <p><strong>Dealer Name:</strong> {formData.company.dealer_name}</p>\n          )}\n          {formData.company.contractor_name && (\n            <p><strong>Contractor Name:</strong> {formData.company.contractor_name}</p>\n          )}\n          {formData.company.other_source_detail && (\n            <p><strong>Source Details:</strong> {formData.company.other_source_detail}</p>\n          )}\n        </div>\n\n        {formData.contacts.map((contact, index) => (\n          <div key={index} className=\"contact-summary\">\n            <h4>Contact {index + 1}</h4>\n            <p><strong>Name:</strong> {contact.name}</p>\n            <p><strong>Email:</strong> {contact.email}</p>\n            <p><strong>Phone:</strong> {contact.phone_number}</p>\n            <p><strong>Position:</strong> {contact.position}</p>\n            <p><strong>Receives Invoices:</strong> {contact.receives_invoices ? 'Yes' : 'No'}</p>\n          </div>\n        ))}\n\n        <div className=\"button-group\">\n          <button \n            type=\"button\" \n            className=\"btn btn-secondary\" \n            onClick={handleBack}\n            disabled={isSubmitting}\n          >\n            Back\n          </button>\n          <button \n            type=\"button\" \n            className=\"btn btn-primary\" \n            onClick={handleFinalSubmit}\n            disabled={isSubmitting}\n          >\n            {isSubmitting ? 'Submitting...' : 'Submit All Information'}\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  // Show confirmation page if form was submitted successfully\n  if (showConfirmation && submissionResult) {\n    return (\n      <ConfirmationPage\n        title=\"Client Information Received!\"\n        message=\"Thank you for submitting your company information. We will review your information.\"\n        referenceNumber={submissionResult.referenceNumber}\n        submissionData={submissionResult.submittedData}\n        showDetails={true}\n        onNewSubmission={handleNewSubmission}\n      />\n    );\n  }\n\n  return (\n    <div className=\"form-container\">\n      {currentStep === 0 && renderCompanyForm()}\n      {currentStep === 1 && renderContactForm()}\n      {currentStep === 2 && renderReviewStep()}\n    </div>\n  );\n};\n\nexport default ClientIntakeForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}